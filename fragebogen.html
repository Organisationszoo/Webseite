<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Fragebogen mit Tierprofil</title>
  <!-- Open Sans einbinden statt Roboto -->
  <link href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@400;600;700&display=swap" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <!-- Plugin f√ºr Prozentwerte im Diagramm -->
  <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-datalabels@2"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>
  <style>
    /* Basis-Styling */
    body {
      font-family: 'Open Sans', sans-serif;
      margin: 0 auto;
      padding: 0 20px 40px;
      max-width: 960px;
      background: #f5f5f5;
      color: #2c2c2c; /* neutraler, gut lesbarer Text */
    }
    h1 {
      font-size: 2rem;
      font-weight: 700;
      color: #1a1a1a;
      text-align: center;
      margin-top: 60px;
      margin-bottom: 20px;
      letter-spacing: 0.3px;
    }
    .user-inputs {
      margin-bottom: 30px;
    }
    .user-inputs input {
      padding: 10px;
      width: 100%;
      max-width: 400px;
      border: 1px solid #ccc;
      border-radius: 8px;
      font-size: 1em;
    }
    #result-footer {
      display: none;
    }
    .user-inputs label {
      font-weight: bold;
      color: #333;
    }

    /* Logo, Header und Beschreibung */
    .logo-wrapper {
      text-align: center;
    }
    /* OrganisationsZoo-Text ausblenden */
    .logo-wrapper .organisationszoo {
      display: none !important;
    }
    /* Eule ohne kreisf√∂rmigen Zuschnitt */
    .logo-wrapper .eule,
    #result-header img {
      display: block;
      margin: 0 auto;
      width: 200px;       /* gew√ºnschte Breite; anpassen, falls n√∂tig */
      height: 200px;      /* gleiche H√∂he f√ºr einen quadratischen Bereich */
      object-fit: cover;  /* sorgt daf√ºr, dass das Bild vollst√§ndig angezeigt wird */
      border-radius: 0;   /* kein runder Zuschnitt */
      background-color: #ffffff;
      border: none;
    }
    .logo-container {
      width: 100vw;
      margin-left: calc(-50vw + 50%);
      background-color: #ffffff;
      padding: 40px 0;
      box-sizing: border-box;
    }
    .logo-background {
      background-color: #ffffff;
      padding: 30px 0;
    }
    .beschreibung {
      max-width: 800px;
      margin: 40px auto;
      font-size: 1.1em;
      line-height: 1.7;
      color: #2c2c2c;
      text-align: center;
    }
    .beschreibung h2 {
      font-size: 1.6em;
      font-weight: 600;
      color: #1a1a1a;
      margin-bottom: 20px;
    }
    .beschreibung .highlight {
      color: #E44A00;
      font-weight: bold;
    }

    /* Dark Mode */
    @media (prefers-color-scheme: dark) {
      .beschreibung {
        color: #f0f0f0;
      }
      .beschreibung h2 {
        color: #ffffff;
      }
      .beschreibung .highlight {
        color: #E44A00;
      }
    }
    /* Light Mode (Standard) */
    h2 {
      color: #000; /* oder dein Standard-Dunkelblau */
    }
    /* Dark Mode */
    @media (prefers-color-scheme: dark) {
      h2 {
        color: #ffffff; /* Willkommens-Text in Weiss */
      }
      .highlight {
        color: #E44A00; /* OrganisationsZoo bleibt orange */
      }
    }
    .intro-section {
      background-color: #ffffff;
      padding: 40px 20px;
      width: 100vw;
      margin-left: calc(-50vw + 50%);
      box-sizing: border-box;
    }
    /* Galerie und Profilboxen */
    #gallery,
    .chartWrap {
      display: flex;
      flex-direction: column;
      gap: 20px;
      align-items: center;
      width: 100%;
    }
    .tier-profil {
      width: 100%;
      max-width: 960px;
      background: #ffffff;
      border-radius: 12px;
      box-shadow: 0 4px 10px rgba(0, 0, 0, 0.05);
      padding: 10px;
      box-sizing: border-box;
      display: flex;
      flex-direction: row;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 20px;
    }
.tier-container {
  width: 100%;
  max-width: 960px;
  background: #ffffff;
  border-radius: 12px;
  box-shadow: 0 4px 10px rgba(0, 0, 0, 0.05);
  padding: 10px;
  box-sizing: border-box;
  display: flex;
  flex-direction: row;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 20px;
}
    .tier-bild {
      flex: 0 0 80px;
      height: 80px;
      display: flex;
      align-items: center;
      justify-content: center;
    }
  .tier-bild img {
  max-width: 100%;
  max-height: 100%;
  width: auto;
  height: auto;
  object-fit: contain;
  display: block;
    }
   .tier-text {
      flex: 1;
      padding: 0 10px;
      text-align: center;
      font-size: 0.9em;
      color: #2c2c2c;
    }
    .tier-text strong {
      font-size: 1.1em;
      color: #1a1a1a;
      display: block;
      margin-bottom: 4px;
    }
    .tier-text p,
    .tier-text em {
      font-size: 0.85em;
    }
    .tier-diagramm {
      flex: 0 0 80px;
      height: 80px;
      display: flex;
      align-items: center;
      justify-content: center;
    }
    /* Frage-Boxen und Antworten */
    .frage-box {
      background: #fff;
      padding: 15px 20px;
      margin: 20px 0;
      border-radius: 10px;
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
    }
    .frage-box h2 {
      font-size: 1.1em;
      margin-bottom: 10px;
      color: #2c3e50;
      font-weight: 600;
    }
    .skala-antwort {
      margin-bottom: 10px;
    }
    .skala-antwort label {
      color: #555555;
      font-weight: 500;
    }
    /* Dark Mode f√ºr Fragen */
    @media (prefers-color-scheme: dark) {
      .frage-box {
        background: #1e1e1e;
        color: #f0f0f0;
      }
      .frage-box h2 {
        color: #f0f0f0;
      }
      .skala-antwort label {
        color: #dddddd;
      }
      .skala-antwort input[type="radio"] {
        accent-color: #E44A00;
      }
    }
    /* Radio-Buttons orange einf√§rben */
    input[type="radio"] {
      accent-color: #E44A00;
    }
    /* Buttons */
    button {
      display: block;
      margin: 25px auto;
      padding: 12px 25px;
      font-size: 1rem;
      background-color: #E44A00;
      color: #fff;
      border: none;
      border-radius: 30px;
      cursor: pointer;
    }
    #ergebnis {
      background: #fff;
      padding: 30px;
      border-radius: 10px;
      margin: 30px auto;
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
      display: none;
    }
    /* Responsive Styles */
    @media screen and (max-width: 600px) {
      .frage-box, #ergebnis {
        padding: 15px;
      }
      canvas {
        max-width: 100% !important;
        height: auto !important;
      }
    }
    /* Druck-Stile */
    @media print {
      /* Elemente der Hauptseite ausblenden */
      #fragebogen, 
      button[type="submit"], 
      .logo-wrapper { 
        display: none;
      }
      /* Ergebnisbereich anzeigen */
      #ergebnis {
        display: block;
        width: 100%;
        padding: 10px;
      }
      #eule-logo {
        width: 50px !important;
        height: auto !important;
        margin-bottom: 10px !important;
      }
      .organisationszoo {
        font-size: 20px !important;
      }
      .category-header h2 {
        font-size: 1.2em !important;
      }
      .category-header p {
        font-size: 0.8em !important;
      }
      .page-break {
        page-break-after: always;
      }
      .second-evaluation {
        font-size: 10pt;
        margin: 0 auto;
        max-width: 100%;
        padding: 5mm;
      }
      .second-evaluation h2 {
        font-size: 14pt !important;
      }
      .second-evaluation h3 {
        font-size: 12pt !important;
      }
      .second-evaluation p {
        font-size: 10pt !important;
      }
      .second-evaluation canvas {
        max-width: 90% !important;
        height: auto !important;
      }
      /* Top-5-Bereich und Konfliktbereich dynamisch skalieren */
      .chartWrap {
        transform: scale(0.9);
        transform-origin: center top;
      }
      /* Reduziere die Abst√§nde in den Profil-Boxen */
      .tier-profil {
        padding: 5px !important;
        margin-bottom: 10px !important;
      }
      /* Schriftgr√∂ssen in den Profil-Texten verkleinern */
      .tier-text strong {
        font-size: 1em !important;
      }
      .tier-text p, 
      .tier-text em {
        font-size: 0.8em !important;
      }
    }
/* F√ºr den normalen Top‚Äë5 Bereich: Stelle sicher, dass das Symbol nicht kursiv ist */
.tier-text span {
  font-style: normal;
}
/* Standard: Footer im Browser verstecken */
.print-footer {
  display: none;
}

/* Im Druck: Footer zeigen */
@media print {
  .print-footer {
    display: block;
    text-align: center;
    font-size: 0.75em;
    margin-top: 1cm;
  }
}

.tier-konflikt-container {
  display: flex;
  justify-content: space-between;
  gap: 40px;
  width: 90%;
  margin: 0 auto;
}

.tier-container {
  flex: 1;
  display: flex;
  align-items: center;
  padding: 20px;
  border: 1px solid #ccc;
  border-radius: 12px;
  background-color: #f7f7f7;
  gap: 20px;
}

.tier-bild img {
  width: 100px;
  height: auto;
  border-radius: 8px;
}

.tier-text {
  flex: 1;
  text-align: left;
}

.tier-text strong {
  font-size: 1.2em;
  display: block;
  margin-bottom: 5px;
}
    @media (prefers-color-scheme: dark) {
      h1 {
        color: #ffffff;
        background-color: transparent;
      }
    }
    /* Finaler Dark Mode f√ºr gesamte Seite */
    @media (prefers-color-scheme: dark) {
      body {
        background-color: #111;
        color: #eee;
      }
      .beschreibung, .frage-box, #ergebnis {
        background-color: #222;
        color: #ddd;
      }
    }
    @media screen and (max-width: 600px) {
      #result-header {
        /* Skaliere den gesamten Container, damit er auf mobilen Ger√§ten reinpasst */
        transform: scale(0.8);
        transform-origin: top left;
        /* Eventuell musst du die Breite erh√∂hen, damit die Skalierung korrekt funktioniert. Hier als Beispiel: */
        width: 125%;
      }
    }
    .tier-container {
      background: white;
      display: flex;
      flex-direction: row;
      align-items: center;
      justify-content: space-between;
      border: 1px solid #ddd;
      padding: 10px;
      margin-bottom: 20px;
      border-radius: 12px;
      box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
      font-size: 0.85em;
      flex-wrap: wrap;
      color: #000; /* Textfarbe schwarz */
    }
    /* Dark Mode ‚Äì Hintergrund & Textfarbe trotzdem wie im Light Mode */
    @media (prefers-color-scheme: dark) {
      .tier-container {
        background-color: white !important;
        color: #000 !important;
      }
    }
    /* Mobile Optimierung */
    @media screen and (max-width: 600px) {
      .tier-container {
        flex-direction: column;
        text-align: center;
        padding: 15px;
      }
      .tier-container > div {
        margin-bottom: 10px;
      }
      .tier-container img {
        height: auto;
        max-height: 120px;
      }
    }
    /* Standard-Styling f√ºr Textarea und Label in .user-inputs */
    .user-inputs textarea {
      width: 100%;
      max-width: 600px;
      padding: 0.75rem;
      border-radius: 8px;
      border: 1px solid #ccc;
      font-size: 1rem;
      resize: vertical;
      background-color: #fff;
      color: #000;
      transition: all 0.3s ease;
    }
    .user-inputs label {
      display: block;
      font-weight: 500;
      margin-bottom: 0.5rem;
      color: #222;
    }
    .user-inputs label span {
      display: block;
      font-size: 0.9rem;
      color: #666;
      margin-top: 0.25rem;
    }
    /* Dark Mode (respektiert das OS-Setting) */
    @media (prefers-color-scheme: dark) {
      .user-inputs textarea {
        background-color: #1e1e1e;
        color: #f0f0f0;
        border: 1px solid #555;
      }
      .user-inputs label {
        color: #eee;
      }
      .user-inputs label span {
        color: #aaa;
      }
    }

:root {
  /* Helles Theme */
  --bg-color: #ffffff;
  --text-primary: #222222;
  --text-secondary: #444444;
  --border-color: #E44A00;
}

@media (prefers-color-scheme: dark) {
  .heading-wrapper h2,
  .heading-wrapper p {
    /* zwingend hell anzeigen */
    color: #ffffff !important;
  }
}

.heading-wrapper {
  max-width: 90%;
  width: 800px;
  margin: 50px auto 30px;
  padding: 0 16px;             /* sorgt f√ºr Abstand auf kleinen Bildschirmen */
  text-align: center;
}

.heading-wrapper h2 {
  font-size: 1.8em;
  margin-bottom: 12px;
  color: var(--text-primary);
}

.heading-wrapper p {
  font-size: 0.95em;
  /* statt var(--text-secondary) jetzt: */
  color: var(--text-primary);
  line-height: 1.6;
}

.section {
  display: flex;
  flex-direction: column;      /* mobile: untereinander */
  align-items: center;
  gap: 16px;
  background-color: var(--bg-color);
  border-radius: 16px;
  padding: 20px;
  margin: 30px auto;
  box-shadow: 0 4px 14px rgba(0, 0, 0, 0.08);
  max-width: 90%;
  border-left: 6px solid var(--border-color);
}

/* Ab Tablet‚ÄëGr√∂sse nebeneinander anordnen */
@media (min-width: 600px) {
  .section {
    flex-direction: row;
    gap: 24px;
    padding: 20px 28px;
  }
}

.section img {
  width: 90px;
  height: 90px;
  object-fit: contain;
  border-radius: 12px;
  background: #f0f0f0;
  padding: 8px;
}

.section .text {
  flex: 1;
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.section .text h3 {
  margin: 0;
  font-size: 1.1em;
  color: var(--text-primary);
}

.section .text p {
  margin: 0;
  font-size: 0.95em;
  color: var(--text-secondary);
  line-height: 1.4;
}
.reflexion-text {
  font-size: 0.95em;
  color: var(--text-secondary);
  line-height: 1.6;
}

@media (prefers-color-scheme: dark) {
  .reflexion-text {
    color: #ffffff !important;
  }
}
:root {
  --bg-card: #ffffff;
  --text-color: #000000;
}

@media (prefers-color-scheme: dark) {
  :root {
    --bg-card: #1e1e1e;
    --text-color: #ffffff;
  }
}
:root {
  --bg-color: #ffffff;
  --text-primary: #222222;
  --text-secondary: #666666;
  --border-color: #ccc;
  --accent-color: #E44A00;
}
/* In dein bestehendes <style>-Block */
.required-label::after {
  content: ' *';
  color: red;            /* oder var(--accent-color) */
  margin-left: 0.25rem;
  font-weight: bold;
}

/* Container f√ºr alle Felder */
.user-inputs {
  max-width: 480px;
  margin: 0 0 1.5rem 0;       /* oben 0, rechts 0, unten 1.5rem, links 0 */
  padding: 0;                 /* kein Innenabstand mehr */
  font-family: 'Open Sans', sans-serif;
  text-align: left;
}

/* Label-Style */
.user-inputs label {
  display: block;
  margin-bottom: 0.5rem;
  font-size: 1rem;
  font-weight: 600;
  color: var(--text-primary);
}

/* Hilfetexte unter Labels */
.user-inputs .help-text {
  margin: -0.25rem 0 0.75rem;
  font-size: 0.85rem;
  color: var(--text-secondary);
}

/* Inputs und Textareas */
.user-inputs input,
.user-inputs textarea {
  width: 100%;
  font-family: inherit;
  font-size: 1rem;
  color: var(--text-primary);
  background-color: var(--bg-color);
  border: 1px solid var(--border-color);
  border-radius: 8px;
  padding: 0.75rem 1rem;
  box-sizing: border-box;
  transition: border-color 0.2s;
}

/* Mehrzeilige Felder */
.user-inputs textarea {
  resize: vertical;
}

/* Fokus-Zustand */
.user-inputs input:focus,
.user-inputs textarea:focus {
  outline: none;
  border-color: var(--accent-color);
  box-shadow: 0 0 0 2px rgba(228, 74, 0, 0.2);
}

/* Pflichtfeld-Stern im Feld */
.required-field {
  position: relative;
}
.required-field input {
  padding-right: 2rem;
}
.required-field::after {
  content: '*';
  position: absolute;
  top: 50%;
  right: 1rem;
  transform: translateY(-50%);
  color: var(--accent-color);
  font-size: 1.2rem;
  pointer-events: none;
}

/* Radio-Group (Selbst/Fremd) */
.user-inputs .radio-group {
  display: flex;
  flex-direction: column;
  align-items: flex-start;
  gap: 0.75rem;
  margin: 0.5rem 0 0 0;
}
.user-inputs .radio-group label {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  font-size: 1rem;
  font-weight: 600;
  color: var(--text-primary);
}
.user-inputs .radio-group input[type="radio"] {
  accent-color: var(--accent-color);
  transform: scale(1.1);
}

/* Dark Mode */
@media (prefers-color-scheme: dark) {
  :root {
    --bg-color: #1e1e1e;
    --text-primary: #eee;
    --text-secondary: #aaa;
    --border-color: #444;
  }
}

/* Mobile-Feinheiten */
@media (max-width: 600px) {
  .user-inputs {
    padding: 0 0.5rem;
  }
}
@media (max-width: 600px) {
  .tier-profil {
    flex-direction: column;
    align-items: center;
    text-align: center;
  }
  .tier-bild, .tier-text, .tier-diagramm {
    flex: none;
    width: 100%;
    margin-bottom: 10px;
  }
.tier-bild img {
  width: 100%;
  height: auto;
  object-fit: contain;
  max-width: 100%;
  display: block;
}
}
.radio-option {
  display: flex;
  flex-direction: column;
  align-items: center;
  margin: 0 8px;
}
.radio-option input[type="radio"] {
  margin-bottom: 4px;
}
.radio-label {
  font-size: 0.9em;
  color: #33
}
.radio-group {
  display: flex;
  flex-direction: row;
  justify-content: flex-start; /* statt center */
  gap: 16px;
}

.radio-option {
  display: flex;
  flex-direction: column;
  align-items: center; /* das kannst du auch auf flex-start √§ndern, wenn auch die Zahl ganz links sein soll */
}
  </style>
</head>
<body>
  <div class="logo-container">
    <div class="logo-wrapper">
      <img src="eule-organisationszoo.png" alt="Eule" class="eule" />
      <div class="organisationszoo">OrganisationsZoo</div>
    </div>
  </div>

 <!-- üêæ Einleitung (zentriert) -->
<div style="text-align: center;">
  <h2>Willkommen beim <span style="color:#E44A00;">OrganisationsZoo</span></h2>
</div>

<!-- üí¨ Einleitungstext (linksb√ºndig) in einem eigenen Container -->
<div class="intro-text" style="text-align: left;">
  <p>
    Stell dir vor, du bist Teil eines Teams ‚Äì vielleicht als Angestellte*r, Teamleiter*in, Abteilungs- oder Bereichsleiter*in. Je nach Rolle ver√§ndern sich deine Perspektive, dein Verhalten und dein Einfluss auf andere.
  </p>
  <p>
    In diesem Fragebogen geht es darum, dich selbst besser kennenzulernen: Wie verhalte ich mich in bestimmten Situationen? Was sind meine St√§rken? Wo habe ich Entwicklungspotenzial? Warum l√§uft die Zusammenarbeit mit manchen Kolleg*innen reibungslos ‚Äì w√§hrend es mit anderen immer wieder zu Reibungspunkten kommt?
  </p>
  <p>
    Zus√§tzlich gibt es einen separaten Bogen f√ºr eine <strong>Fremdeinsch√§tzung</strong>, den Kolleg*innen, F√ºhrungskr√§fte oder andere Personen aus deinem Umfeld ausf√ºllen k√∂nnen. So entsteht die M√∂glichkeit, dein Selbstbild mit dem Fremdbild zu vergleichen: Wie sehe ich mich ‚Äì und wie sehen andere mich? Wo gibt es √úbereinstimmungen, wo Unterschiede?
  </p>
  <p>
    Bevor du loslegst: Versetze dich in typische berufliche Situationen ‚Äì im Team, in Projekten oder in Konflikten. √úberlege, wie du reagierst, Entscheidungen triffst und welche deiner Eigenschaften du dabei einsetzt.
  </p>
  <p>
    F√ºr jede Aussage w√§hlst du eine Zahl von 0 (‚Äûtrifft gar nicht zu‚Äú) bis 4 (‚Äûtrifft voll zu‚Äú). Antworte ehrlich und aus dem Bauch heraus ‚Äì je authentischer du bist, desto aussagekr√§ftiger wird dein Ergebnis.
  </p>
  <p>
    Viel Erfolg ‚Äì und entdecke deine tierisch starken Seiten!
  </p>
</div>

<div class="user-inputs">
  <label>Wen bewertest du?</label>
  <div class="radio-group">
    <label><input type="radio" name="modus" value="selbst" checked> Mich selbst</label>
    <label><input type="radio" name="modus" value="fremd"> Eine andere Person</label>
  </div>
</div>

  <!-- üßç‚Äç‚ôÄÔ∏è Eingabefelder f√ºr Name und E-Mail -->
<div class="user-inputs" style="max-width: 480px; margin-bottom: 2rem;">
  
  <label for="name" style="font-weight: 700; display: block; margin-bottom: 0.5rem; color: var(--text-primary);">
  Name:
  </label>
  <input 
    type="text" 
    id="name" 
    name="name" 
    placeholder="Dein Name"
    style="width: 100%; padding: 10px; border: 1px solid #ccc; border-radius: 6px; margin-bottom: 1.5rem;"
  />

<div class="user-inputs">
  <!-- 1. Label mit rotem Stern -->
  <label for="email" class="required-label">E-Mail-Adresse</label>

<!-- 3. Hilfetext darunter -->
  <p class="help-text">
    Gib bitte deine E-Mail-Adresse ein ‚Äì sie ist notwendig, um dein Ergebnis anzuzeigen.
  </p>
  
  <!-- 2. Input-Feld -->
  <input
    type="email"
    id="email"
    name="email"
    placeholder="deine@email.ch"
    required
  />
</div>
</div>

<div class="user-inputs">
  <label for="situation">Welche Situation stelle ich mir vor?</label>
  <p class="help-text">
    z. B. ‚ÄûIch als Teamleiter im Team‚Äú, ‚ÄûIch als Angestellte*r mit Kolleg*in‚Äú oder ‚ÄûIch im Projekt‚Äú
  </p>
  <textarea
    id="situation"
    name="situation"
    rows="3"
    placeholder="Beschreibe kurz deine Rolle und Situation"
    required
  ></textarea>
</div>

<h1>Dein Fragebogen</h1>

  <!-- üìã Der Fragebogen -->
  <form id="fragebogen"></form>

  <!-- üîò Auswerten-Button (anfangs deaktiviert) -->
  <button type="submit" form="fragebogen" id="auswertenBtn" disabled>Auswerten</button>

  <!-- üñ® Ergebnis + Druckbutton -->
  <div id="ergebnis" style="display:none;"></div>
  <button id="printButton" style="display:none;"> Drucken</button>

<script>
document.addEventListener("DOMContentLoaded", function () {
  const formElem     = document.getElementById("fragebogen");
  const ergebnisElem = document.getElementById("ergebnis");
  const printButton  = document.getElementById("printButton");
let attributeData = {};
function makeFileName(name) {
  return name
    .toLowerCase()
    .replaceAll("√§", "ae")
    .replaceAll("√∂", "oe")
    .replaceAll("√º", "ue")
    .replaceAll("ss", "ss")
    .replaceAll(" ", "_")
    .normalize("NFD")
    .replace(/[\u0300-\u036f]/g, "");
}
      
      // Array der Fragen
      const questions = [
  {
    frage: "Frage 1: Wie setzt du deine F√§higkeiten in einem Team am liebsten ein?",
    frage_fremd: "Frage 1: Wie setzt die Person ihre F√§higkeiten im Team am liebsten ein?",
    keyword: "Team",
    answers: {
      A: {
        code: "S1",
        text: "Ich √ºbernehme gerne <strong>Verantwortung</strong>, koordiniere Aufgaben und achte auf den Gesamt√ºberblick.",
        text_fremd: "Die Person √ºbernimmt gerne <strong>Verantwortung</strong>, koordiniert Aufgaben und beh√§lt den Gesamt√ºberblick."
      },
      B: {
        code: "S2",
        text: "Ich arbeite <strong>strukturiert</strong>, gehe Schritt f√ºr Schritt vor und bleibe bei erprobten Methoden.",
        text_fremd: "Die Person arbeitet <strong>strukturiert</strong>, geht schrittweise vor und nutzt bew√§hrte Methoden."
      },
      C: {
        code: "R1",
        text: "Auch unter Druck halte ich durch, bleibe <strong>ausdauernd</strong> und verliere mein Ziel nicht aus den Augen.",
        text_fremd: "Auch unter Druck wirkt die Person <strong>ausdauernd</strong> und verliert ihr Ziel nicht aus den Augen."
      },
      D: {
        code: "R2",
        text: "Im Team verfolge ich einen individuellen Ansatz, bringe eigene <strong>Ideen</strong> ein und sch√§tze es, wenn auch alternative Perspektiven ber√ºcksichtigt werden.",
        text_fremd: "Die Person bringt eigene <strong>Ideen</strong> ein und sch√§tzt alternative Perspektiven."
      }
    }
  },
  {
    frage: "Frage 2: Wie verh√§ltst du dich, wenn im Team Konflikte auftreten?",
    frage_fremd: "Frage 2: Wie verh√§lt sich die Person, wenn im Team Konflikte auftreten?",
    keyword: "Konflikte",
    answers: {
      A: {
        code: "S3",
        text: "Ich suche das direkte <strong>Gespr√§ch</strong>, h√∂re alle Seiten an und strebe eine gemeinsame L√∂sung an.",
        text_fremd: "Die Person sucht das direkte <strong>Gespr√§ch</strong>, h√∂rt allen Seiten zu und strebt eine L√∂sung an."
      },
      B: {
        code: "S4",
        text: "In Konflikten halte ich mich vordergr√ºndig <strong>neutral</strong>, beobachte genau ‚Äì und greife subtil ein, wenn ich erkenne, wo mein Einfluss am wirkungsvollsten ist.",
        text_fremd: "Die Person bleibt vordergr√ºndig <strong>neutral</strong> und greift subtil ein, wenn sinnvoll."
      },
      C: {
        code: "R3",
        text: "Ich stelle <strong>provozierende</strong> Fragen, um festgefahrene Denkblockaden aufzubrechen ‚Äì auch wenn das aneckt.",
        text_fremd: "Die Person stellt <strong>provozierende</strong> Fragen, um Denkblockaden aufzubrechen."
      },
      D: {
        code: "R4",
        text: "Ich bleibe <strong>ruhig</strong>, vermeide vorschnelle Urteile und vermittle Stabilit√§t in der Gruppe.",
        text_fremd: "Die Person bleibt <strong>ruhig</strong> und vermittelt Stabilit√§t in Konflikten."
      }
    }
  },
  {
    frage: "Frage 3: Was motiviert dich, deine Arbeit mit vollem Einsatz zu erledigen?",
    frage_fremd: "Frage 3: Was scheint die Person besonders zu motivieren, sich voll einzubringen?",
    keyword: "Einsatz",
    answers: {
      A: {
        code: "S5",
        text: "Ich sch√∂pfe meine St√§rke aus <strong>Erfahrung</strong>. Auch in schwierigen Situationen halte ich durch und verliere nicht den Boden unter den F√ºssen.",
        text_fremd: "Die Person wirkt <strong>erfahren</strong> und bleibt auch in schwierigen Situationen standhaft."
      },
      B: {
        code: "S6",
        text: "Inspirierende <strong>Visionen</strong> und die Hoffnung, etwas Sinnvolles oder Kreatives beizutragen.",
        text_fremd: "Die Person wird durch <strong>Visionen</strong> und kreative Aufgaben besonders motiviert."
      },
      C: {
        code: "R5",
        text: "Die Chance, <strong>strategisch</strong> vorzugehen, clevere L√∂sungen zu finden und Chancen zu erkennen.",
        text_fremd: "Die Person nutzt gerne <strong>strategische</strong> Ans√§tze und erkennt Chancen."
      },
      D: {
        code: "R6",
        text: "Ich bin dann voll dabei, wenn ich <strong>schnell</strong> reagiere, gezielt Einfluss nehme und mit Nachdruck meine Interessen durchsetzen kann ‚Äì notfalls auch gegen Widerstand.",
        text_fremd: "Die Person reagiert <strong>schnell</strong>, nimmt Einfluss und setzt sich nachdr√ºcklich durch."
      }
    }
  },
  {
    frage: "Frage 4: Wie gehst du mit unerwarteten Ver√§nderungen im Arbeitsablauf um?",
    frage_fremd: "Frage 4: Wie geht die Person mit unerwarteten Ver√§nderungen im Arbeitsalltag um?",
    keyword: "Ver√§nderungen",
    answers: {
      A: {
        code: "S7",
        text: "Ich bleibe <strong>ruhig</strong>, passe mich an, sobald ich die neue Situation verstehe.",
        text_fremd: "Die Person bleibt <strong>ruhig</strong> und passt sich an, sobald sie die neue Situation verstanden hat."
      },
      B: {
        code: "S8",
        text: "Ich <strong>analysiere</strong> gr√ºndlich, schaue mir Risiken und Chancen an, bevor ich handle.",
        text_fremd: "Die Person analysiert gr√ºndlich, pr√ºft Risiken und Chancen, bevor sie handelt."
      },
      C: {
        code: "R7",
        text: "Ich ziehe mich etwas zur√ºck, gehe <strong>schrittweise</strong> vor und vermeide √ºbereilte Entschl√ºsse.",
        text_fremd: "Die Person zieht sich zur√ºck, geht <strong>schrittweise</strong> vor und vermeidet √ºbereilte Entscheidungen."
      },
      D: {
        code: "R8",
        text: "Ich √ºbernehme <strong>spontan</strong> Verantwortung und greife schnell ein, wenn ich eine M√∂glichkeit sehe.",
        text_fremd: "Die Person √ºbernimmt <strong>spontan</strong> Verantwortung und greift schnell ein, wenn sie eine M√∂glichkeit sieht."
      }
    }
  },
  {
    frage: "Frage 5: Welche Aspekte sind dir in einem Arbeitsumfeld besonders wichtig?",
    frage_fremd: "Frage 5: Welche Aspekte sind der Person in ihrem Arbeitsumfeld besonders wichtig?",
    keyword: "Arbeitsumfeld",
    answers: {
      A: {
        code: "S9",
        text: "Besonnene, eher langsame Entscheidungen, damit nichts <strong>√ºberst√ºrzt</strong> wird.",
        text_fremd: "Die Person trifft besonnene, eher langsame Entscheidungen, damit nichts <strong>√ºberst√ºrzt</strong> wird."
      },
      B: {
        code: "S10",
        text: "Ein Umfeld, in dem ich klug agieren, Entwicklungen <strong>beobachten</strong> und zum richtigen Zeitpunkt die besten Chancen nutzen kann.",
        text_fremd: "Die Person agiert klug, <strong>beobachtet</strong> Entwicklungen und nutzt Chancen zum richtigen Zeitpunkt."
      },
      C: {
        code: "R11",
        text: "<strong>Provokante</strong> Impulse, die eingefahrene Routinen aufbrechen ‚Äì auch wenn andere dies als aufdringlich empfinden.",
        text_fremd: "Die Person setzt <strong>provokante</strong> Impulse ein, um Routinen aufzubrechen."
      },
      D: {
        code: "R12",
        text: "Effizienz und <strong>Zuverl√§ssigkeit</strong>, damit das Team ein klares Ziel im Auge beh√§lt.",
        text_fremd: "Die Person legt Wert auf Effizienz und <strong>Zuverl√§ssigkeit</strong>, damit das Team ein klares Ziel verfolgt."
      }
    }
  },
  {
    frage: "Frage 6: Wie triffst du pers√∂nlich Entscheidungen in unsicheren Situationen?",
    frage_fremd: "Frage 6: Wie trifft die Person Entscheidungen in unsicheren Situationen?",
    keyword: "Entscheidungen",
    answers: {
      A: {
        code: "S11",
        text: "Ich beziehe gern mein Umfeld ein, diskutiere mit dem Team und suche einen <strong>Konsens</strong>.",
        text_fremd: "Die Person bezieht ihr Umfeld ein, diskutiert im Team und sucht einen <strong>Konsens</strong>."
      },
      B: {
        code: "S12",
        text: "Ich setze auf Bew√§hrtes, bleibe <strong>loyal</strong> gegen√ºber bestehenden Strukturen und gehe ungern Risiken ein.",
        text_fremd: "Die Person setzt auf Bew√§hrtes, bleibt <strong>loyal</strong> und geht ungern Risiken ein."
      },
      C: {
        code: "R9",
        text: "Ich handle <strong>schnell</strong> und entschlossen, ohne mich lange von Unsicherheiten aufhalten zu lassen.",
        text_fremd: "Die Person handelt <strong>schnell</strong> und entschlossen, ohne sich von Unsicherheiten aufhalten zu lassen."
      },
      D: {
        code: "R10",
        text: "Ich folge meinem <strong>Bauchgef√ºhl</strong> und bin offen f√ºr spontane Ideen, auch wenn sie ungew√∂hnlich sind.",
        text_fremd: "Die Person folgt ihrem <strong>Bauchgef√ºhl</strong> und ist offen f√ºr spontane Ideen."
      }
    }
  },
  {
    frage: "Frage 7: Welche Rolle spielt Unabh√§ngigkeit in deinem Arbeitsalltag?",
    frage_fremd: "Frage 7: Welche Rolle spielt Unabh√§ngigkeit f√ºr die Person im Arbeitsalltag?",
    keyword: "Unabh√§ngigkeit",
    answers: {
      A: {
        code: "S13",
        text: "Ich halte mich f√ºr √§usserst vielseitig und <strong>kreativ</strong>, manchmal √ºbersch√§tze ich dabei meine M√∂glichkeiten.",
        text_fremd: "Die Person wirkt √§usserst vielseitig und <strong>kreativ</strong>, manchmal √ºbersch√§tzt sie ihre M√∂glichkeiten."
      },
      B: {
        code: "S14",
        text: "Ich finde <strong>Durchsetzungsf√§higkeit</strong> entscheidend, um eigenst√§ndig handeln zu k√∂nnen.",
        text_fremd: "Die Person h√§lt <strong>Durchsetzungsf√§higkeit</strong> f√ºr entscheidend, um eigenst√§ndig handeln zu k√∂nnen."
      },
      C: {
        code: "R15",
        text: "<strong>Teamgeist</strong> geht vor; ich lege grossen Wert auf Austausch und ein starkes Gemeinschaftsgef√ºhl.",
        text_fremd: "Die Person legt grossen Wert auf <strong>Teamgeist</strong> und Austausch."
      },
      D: {
        code: "R16",
        text: "Mir ist eine reibungslose <strong>Kommunikation</strong> besonders wichtig, damit alle an einem Strang ziehen.",
        text_fremd: "Die Person empfindet reibungslose <strong>Kommunikation</strong> als besonders wichtig."
      }
    }
  },
  {
    frage: "Frage 8: Wie stehst du zu Verantwortung im Job?",
    frage_fremd: "Frage 8: Wie geht die Person mit Verantwortung im Job um?",
    keyword: "Verantwortung",
    answers: {
      A: {
        code: "S15",
        text: "Ich √ºbernehme <strong>Verantwortung</strong> eher unterst√ºtzend, sorge f√ºr Effizienz und helfe dem Team, ohne im Rampenlicht zu stehen.",
        text_fremd: "Die Person √ºbernimmt <strong>Verantwortung</strong> unterst√ºtzend, sorgt f√ºr Effizienz und hilft dem Team."
      },
      B: {
        code: "S16",
        text: "Ich setze <strong>konsequent</strong> meine eigenen Ideen durch, selbst wenn das Team dies als eigenwillig oder st√∂rend empfindet.",
        text_fremd: "Die Person setzt <strong>konsequent</strong> ihre eigenen Ideen durch, auch wenn es st√∂rend wirkt."
      },
      C: {
        code: "R13",
        text: "Ich nutze Verantwortung <strong>strategisch</strong> und scheue mich nicht, nachdr√ºcklich zu handeln, wenn es meinen Zielen dient.",
        text_fremd: "Die Person nutzt Verantwortung <strong>strategisch</strong> und handelt nachdr√ºcklich."
      },
      D: {
        code: "R14",
        text: "Ich kombiniere viele <strong>F√§higkeiten</strong> und bin √ºberzeugt, fast alles l√∂sen zu k√∂nnen, was teils √ºberheblich wirkt.",
        text_fremd: "Die Person kombiniert viele <strong>F√§higkeiten</strong> und wirkt √ºberzeugt, fast alles l√∂sen zu k√∂nnen."
      }
    }
  },
  {
    frage: "Frage 9: Wie reagierst du, wenn du kritisiert wirst?",
    frage_fremd: "Frage 9: Wie reagiert die Person, deiner Wahrnehmung nach, auf Kritik?",
    keyword: "kritisiert",
    answers: {
      A: {
        code: "S17",
        text: "Ich bin <strong>offen</strong> daf√ºr, reflektiere mein Verhalten und passe mich an, wenn es sinnvoll ist.",
        text_fremd: "Die Person zeigt sich <strong>offen</strong>, reflektiert ihr Verhalten und passt sich an."
      },
      B: {
        code: "S18",
        text: "Ich halte an meinem <strong>Standpunkt</strong> fest und lasse mich nicht schnell verunsichern.",
        text_fremd: "Die Person h√§lt an ihrem <strong>Standpunkt</strong> fest und wirkt sicher."
      },
      C: {
        code: "R19",
        text: "Ich denke ausgiebig nach und ziehe meine Lehren aus <strong>konstruktiver Kritik</strong>.",
        text_fremd: "Die Person denkt nach und lernt aus <strong>konstruktiver Kritik</strong>."
      },
      D: {
        code: "R20",
        text: "Ich bleibe <strong>gefasst</strong> und nutze Feedback als Chance zur Weiterentwicklung.",
        text_fremd: "Die Person bleibt <strong>gefasst</strong> und nutzt Feedback zur Weiterentwicklung."
      }
    }
  },
  {
    frage: "Frage 10: Welche Rolle nimmst du typischerweise in einem Team ein?",
    frage_fremd: "Frage 10: Welche Rolle nimmt die Person typischerweise in einem Team ein?",
    keyword: "Rolle",
    answers: {
      A: {
        code: "S19",
        text: "Ich √ºbernehme gerne <strong>F√ºhrung</strong>, bin mutig und gehe voran.",
        text_fremd: "Die Person √ºbernimmt gerne <strong>F√ºhrung</strong>, ist mutig und geht voran."
      },
      B: {
        code: "S20",
        text: "Ich arbeite <strong>gr√ºndlich</strong>, k√ºmmere mich um Details und gebe dem Team R√ºckhalt.",
        text_fremd: "Die Person arbeitet <strong>gr√ºndlich</strong>, k√ºmmert sich um Details und gibt R√ºckhalt."
      },
      C: {
        code: "R21",
        text: "Ich bringe <strong>vision√§re</strong> Ideen ein, wirke jedoch manchmal z√∂gerlich oder unsicher, wenn es an die Umsetzung geht.",
        text_fremd: "Die Person bringt <strong>vision√§re</strong> Ideen ein, wirkt aber manchmal z√∂gerlich bei der Umsetzung."
      },
      D: {
        code: "R22",
        text: "Ich halte an bew√§hrten Rollen fest, agiere zur√ºckhaltend, aber mit <strong>Erfahrung</strong>, besonders wenn es um Stabilit√§t geht.",
        text_fremd: "Die Person agiert zur√ºckhaltend, aber mit <strong>Erfahrung</strong>, besonders f√ºr Stabilit√§t."
      }
    }
  },
  {
    frage: "Frage 11: Wie gestaltest du deine langfristige Planung?",
    frage_fremd: "Frage 11: Wie geht die Person bei langfristiger Planung vor?",
    keyword: "Planung",
    answers: {
      A: {
        code: "S21",
        text: "Ich investiere viel <strong>Energie</strong> und nutze jede Gelegenheit, notfalls auch manipulativ, um voranzukommen.",
        text_fremd: "Die Person investiert viel <strong>Energie</strong> und nutzt jede Gelegenheit, um voranzukommen."
      },
      B: {
        code: "S22",
        text: "Ich passe meine Pl√§ne <strong>flexibel</strong> an, behalte aber mein Hauptziel stets im Blick.",
        text_fremd: "Die Person passt ihre Pl√§ne <strong>flexibel</strong> an und beh√§lt das Ziel im Blick."
      },
      C: {
        code: "R17",
        text: "Ich wahre den <strong>√úberblick</strong>, formuliere klare Visionen und verfolge sie konsequent.",
        text_fremd: "Die Person wahrt den <strong>√úberblick</strong>, formuliert klare Visionen und verfolgt sie konsequent."
      },
      D: {
        code: "R18",
        text: "Ich bleibe <strong>besonnen</strong> und bedacht, lasse mich auch durch Stress nicht aus der Ruhe bringen.",
        text_fremd: "Die Person bleibt <strong>besonnen</strong> und l√§sst sich auch durch Stress nicht aus der Ruhe bringen."
      }
    }
  },
  {
    frage: "Frage 12: Wie reagierst du auf hohen Zeit- oder Leistungsdruck?",
    frage_fremd: "Frage 12: Wie reagiert die Person auf hohen Zeit- oder Leistungsdruck?",
    keyword: "Leistungsdruck",
    answers: {
      A: {
        code: "S23",
        text: "Ich strahle <strong>Ruhe</strong> aus, strukturiere meine Aufgaben und lasse mich nicht hetzen.",
        text_fremd: "Die Person strahlt <strong>Ruhe</strong> aus, strukturiert ihre Aufgaben und l√§sst sich nicht hetzen."
      },
      B: {
        code: "S24",
        text: "Ich ziehe mich gern zur√ºck, lasse andere agieren ‚Äì und nutze die Gelegenheit, <strong>unauff√§llig</strong> meinen Vorteil zu sichern.",
        text_fremd: "Die Person zieht sich zur√ºck, l√§sst andere agieren und nutzt unauff√§llig ihren Vorteil."
      },
      C: {
        code: "R25",
        text: "Ich gehe <strong>systematisch</strong> vor, um Fehler zu vermeiden und den √úberblick zu behalten.",
        text_fremd: "Die Person geht <strong>systematisch</strong> vor, um Fehler zu vermeiden und den √úberblick zu behalten."
      },
      D: {
        code: "R26",
        text: "Ich ziehe das Tempo an, bleibe <strong>fokussiert</strong> und m√∂chte H√∂chstleistung zeigen.",
        text_fremd: "Die Person zieht das Tempo an, bleibt <strong>fokussiert</strong> und zeigt H√∂chstleistung."
      }
    }
  },
  {
    frage: "Frage 13: Welche besondere St√§rke bringst du verl√§sslich in dein Berufsleben ein?",
    frage_fremd: "Frage 13: Welche besondere St√§rke zeigt die Person verl√§sslich im Berufsleben?",
    keyword: "St√§rke",
    answers: {
      A: {
        code: "S25",
        text: "Ich gehe meinen eigenen Weg, arbeite mit Biss und bringe <strong>kreative</strong> Ideen ein, auch wenn ich mich selten anpasse.",
        text_fremd: "Die Person geht ihren eigenen Weg, arbeitet mit Biss und bringt <strong>kreative</strong> Ideen ein."
      },
      B: {
        code: "S26",
        text: "Ich bin <strong>robust</strong>, halte lange durch und scheue keine grossen Herausforderungen.",
        text_fremd: "Die Person ist <strong>robust</strong>, h√§lt lange durch und scheut keine Herausforderungen."
      },
      C: {
        code: "R23",
        text: "Meine St√§rke liegt darin, mich situativ <strong>anzupassen</strong>, zwischen den Zeilen zu lesen und auch in komplexen Situationen ohne grossen Widerstand meinen Weg zu finden.",
        text_fremd: "Die Person passt sich situativ an, liest zwischen den Zeilen und findet ihren Weg in komplexen Situationen."
      },
      D: {
        code: "R24",
        text: "Ich bin <strong>kooperativ</strong>, entwickle neue Ideen und f√∂rdere den Zusammenhalt im Team.",
        text_fremd: "Die Person ist <strong>kooperativ</strong>, entwickelt Ideen und f√∂rdert den Zusammenhalt im Team."
      }
    }
  },
  {
    frage: "Frage 14: Welche St√§rken beschreiben dich am besten (Mix‚ÄêFrage)?",
    frage_fremd: "Frage 14: Welche der genannten St√§rken passen deiner Meinung nach am besten zur Person?",
    keyword: "St√§rken",
    answers: {
      A: {
        code: "C1",
        text: "Fleiss, Flexibilit√§t, Raffinesse, <strong>vision√§res</strong> Denken (vereint mehrere Eigenschaften).",
        text_fremd: "Fleiss, Flexibilit√§t, Raffinesse, <strong>vision√§res</strong> Denken passen gut zur Person."
      },
      B: {
        code: "C2",
        text: "<strong>Robust</strong>, unabh√§ngig, zupackend, meistert grosse Herausforderungen.",
        text_fremd: "<strong>Robust</strong>, unabh√§ngig und zupackend meistert die Person Herausforderungen."
      },
      C: {
        code: "C3",
        text: "Gelassen, bed√§chtig, <strong>weise</strong>, strategisch ‚Äì oft mit ruhiger Energie.",
        text_fremd: "Gelassen, bed√§chtig, <strong>weise</strong> und strategisch wirkt die Person."
      },
      D: {
        code: "C4",
        text: "Manchmal <strong>provokant</strong>, loyal, spontan, ideenreich in neuen Situationen.",
        text_fremd: "Die Person ist manchmal <strong>provokant</strong>, loyal und spontan."
      }
    }
  },
  {
    frage: "Frage 15: In welchem Bereich m√∂chtest du dich pers√∂nlich weiterentwickeln?",
    frage_fremd: "Frage 15: In welchem Bereich k√∂nnte sich die Person deiner Meinung nach weiterentwickeln?",
    keyword: "weiterentwickeln",
    answers: {
      A: {
        code: "C1",
        text: "Ich m√∂chte lernen, nicht immer alles <strong>kontrollieren</strong> zu wollen und auch loszulassen.",
        text_fremd: "Die Person k√∂nnte lernen, nicht immer alles <strong>kontrollieren</strong> zu wollen und loszulassen."
      },
      B: {
        code: "C2",
        text: "Ich will bewusster mit <strong>impulsiven</strong> Reaktionen umgehen und mehr Geduld entwickeln.",
        text_fremd: "Die Person k√∂nnte bewusster mit <strong>impulsiven</strong> Reaktionen umgehen und Geduld entwickeln."
      },
      C: {
        code: "C3",
        text: "Ich arbeite daran, <strong>Entscheidungen</strong> mutiger zu treffen und nicht zu lange zu gr√ºbeln.",
        text_fremd: "Die Person k√∂nnte mutiger Entscheidungen treffen und nicht zu lange gr√ºbeln."
      },
      D: {
        code: "C4",
        text: "Ich m√∂chte meine <strong>Spontanit√§t</strong> besser strukturieren und emotionale Ausbr√ºche im Zaum halten.",
        text_fremd: "Die Person k√∂nnte ihre <strong>Spontanit√§t</strong> besser strukturieren und emotionale Ausbr√ºche z√ºgeln."
      }
    }
  }
];

  // 1) renderQuestions-Funktion
  function renderQuestions() {
    formElem.innerHTML = ""; // altes l√∂schen

    const modus = document.querySelector('input[name="modus"]:checked').value;
    questions.forEach((q, index) => {
      const box = document.createElement("div");
      box.className = "frage-box";

      // Frage je nach Modus
      let frageText = modus === "fremd" ? q.frage_fremd : q.frage;
      if (q.keyword) {
        frageText = frageText.replace(
          new RegExp(`(${q.keyword})`, 'gi'),
          '<strong>$1</strong>'
        );
      }
      box.innerHTML = `<h2><strong>${frageText}</strong></h2>`;

      // Antworten
      Object.entries(q.answers).forEach(([key, ans]) => {
        const div = document.createElement("div");
        div.className = "skala-antwort";

let radios = `<div class="radio-group">`;
for (let i = 0; i <= 4; i++) {
  radios += `
    <label class="radio-option">
      <input type="radio"
             name="frage${index}_${ans.code}"
             value="${i}"
             required />
      <div class="radio-label">${i}</div>
    </label>`;
}
radios += `</div>`;

        const ansText = modus === "fremd" ? ans.text_fremd : ans.text;
        div.innerHTML = `<p><strong>${key}:</strong> ${ansText}</p>${radios}`;
        box.appendChild(div);
      });

      formElem.appendChild(box);
    });
  }

  // 3) Initiales Rendering + Umschalten per Radio
   renderQuestions();
  document.querySelectorAll('input[name="modus"]')
          .forEach(r => r.addEventListener('change', renderQuestions));


      // Definiere hier zuerst das Mapping der Tierdaten:
      const animalProperties = {
        "Ameise": {
          staerken: [
            "fleissig", "loyal", "engagiert", "gebietsorientiert",
            "instinktiv", "gesch√§ftig", "hart arbeitend", "auf den moment fokussiert"
          ],
          schwaechen: [
            "empfindsam", "denkend", "logisch", "entscheidungsfreudig",
            "individualistisch", "selbstbewusst", "vision√§r", "reflektierend"
          ]
        },
        "Biene": {
          staerken: [
            "fleissig", "teamorientiert", "kommunikativ", "gebietsorientiert",
            "wissend", "hart arbeitend", "kooperativ", "sozial", "organisiert",
            "intelligent", "loyal", "f√ºrsorglich", "aggressiv"
          ],
          schwaechen: [
            "sich selbst bewusst", "individualistisch", "leichtgl√§ubig",
            "politisch", "reflektierend", "langsam"
          ]
        },
        "Cham√§leon": {
          staerken: [
            "doppelz√ºngig", "schlau", "manipulativ", "schwach",
            "politisch", "intelligent"
          ],
          schwaechen: [
            "treu", "vertrauensw√ºrdig", "konsistent", "zuversichtlich",
            "herausfordernd", "handlungsorientiert"
          ]
        },
        "Hund": {
          staerken: [
            "treu", "vertrauensvoll", "begeistert", "ungest√ºm",
            "leichtgl√§ubig", "energiegeladen", "zuverl√§ssig", "vorhersehbar",
            "gl√ºcklich", "spielerisch", "produktiv", "vertrauensw√ºrdig"
          ],
          schwaechen: [
            "sorgf√§ltig", "ernst", "nachdenklich", "denkend", "schlau"
          ]
        },
        "Adler": {
          staerken: [
            "vision√§r", "stark", "fokussiert", "inspirierend", "zuversichtlich",
            "intelligent", "produktiv", "entschlussfreudig", "ausgeglichen",
            "scharf", "handlungsorientiert", "offen", "vertrauensw√ºrdig", "intuitiv",
            "aggressiv", "verantwortlich", "holistisch", "extravertiert", "respektiert"
          ],
          schwaechen: [
            "z√∂gernd", "emotional", "schwach", "zur√ºckgezogen", "sch√ºchtern", "langsam"
          ]
        },
        "Katze": {
          staerken: [
            "individualistisch", "eifrig", "distanziert", "eitel",
            "egoistisch", "frustrierend", "arrogant", "eingebildet"
          ],
          schwaechen: [
            "kontaktfreudig", "freundlich", "f√ºrsorglich", "teamorientiert",
            "gemeinschaftsorientiert", "interessant"
          ]
        },
        "Gibbon": {
          staerken: [
            "fr√∂hlich", "spielerisch", "lebhaft", "kontaktfreudig", "cool",
            "begeistert", "lustig", "interessant", "rebellisch"
          ],
          schwaechen: [
            "vorsichtig", "ernst", "produktiv", "zukunftsorientiert", "fokussiert"
          ]
        },
        "Hy√§ne": {
          staerken: [
            "aggressiv", "intrigant", "kontrollierend", "manipulativ",
            "teamorientiert", "stark", "politisch", "opportunistisch"
          ],
          schwaechen: [
            "vertrauensw√ºrdig", "f√ºrsorglich", "r√ºcksichtsvoll", "intuitiv", "sch√ºchtern"
          ]
        },
        "Insekt_n√ºtzlich": {
  "staerken": [
    "unterst√ºtzend", 
    "einfallsreich", 
    "zukunftsorientiert", 
    "teamorientiert", 
    "hilfreich", 
    "produktiv", 
    "positiv", 
    "vorausschauend"
  ],
  "schwaechen": [
    "z√∂gerlich", 
    "langsam", 
    "√ºberangepasst", 
    "wenig sichtbar", 
    "emotionsfern"
  ]
},
"Insekt_l√§stig": {
  "staerken": [
    "allgegenw√§rtig", 
    "eigenn√ºtzig", 
    "unberechenbar", 
    "durchsetzungsstark", 
    "ausdauernd", 
    "resistent"
  ],
  "schwaechen": [
    "egoistisch", 
    "n√ºtzlich", 
    "f√ºrsorglich", 
    "produktiv", 
    "bescheiden", 
    "vertrauensw√ºrdig"
  ]
        },
        "Schakal": {
          staerken: [
            "gebietsorientiert", "verteidigungseifrig", "sozial", "aggressiv",
            "kontrollierend", "lebhaft", "eifers√ºchtig", "lebenslustig", "loyal", "f√ºrsorglich"
          ],
          schwaechen: [
            "geduldig", "tolerant", "sch√ºchtern", "zur√ºckgezogen", "f√ºrsorglich"
          ]
        },
        "Kind": {
          staerken: [
            "naiv", "verspielt", "energisch", "motiviert", "entbehrlich", "begeistert", "jugendlich"
          ],
          schwaechen: [
            "erfahren", "zuverl√§ssig", "kenntnisreich", "hart im Nehmen", "pfiffig"
          ]
        },
        "L√∂we": {
          staerken: [
            "stark", "machtorientiert", "aggressiv", "kontrollierend",
            "gebietsorientiert", "faul", "eigenn√ºtzig", "manipulativ", "zuversichtlich"
          ],
          schwaechen: [
            "engagiert", "fleissig", "f√ºrsorglich", "sch√ºchtern", "emotional"
          ]
        },
        "Maus": {
          staerken: [
            "eifrig", "produktiv", "wirtschaftlich", "zuverl√§ssig", "begeistert",
            "unsichtbar", "besch√§ftigt", "individualistisch", "intelligent"
          ],
          schwaechen: [
            "faul", "extrovertiert", "eigenn√ºtzig", "aggressiv", "emotional"
          ]
        },
        "Parasit": {
          staerken: [
            "faul", "parasit√§r", "abh√§ngig", "eigenn√ºtzig", "unsichtbar"
          ],
          schwaechen: [
            "gemeinschaftsorientiert", "produktiv", "freundlich", "r√ºcksichtsvoll", "n√ºtzlich"
          ]
        },
        "Eule": {
          staerken: [
            "weise", "engagiert", "hilfsbereit", "respektiert", "kenntnisreich",
            "logisch", "scharf", "zuversichtlich", "ruhig", "gemeinschaftsorientiert"
          ],
          schwaechen: [
            "faul", "extrovertiert", "egozentrisch", "ehrgeizig", "aggressiv"
          ]
        },
        "Piranha": {
          staerken: [
            "aggressiv", "r√§uberisch", "gef√§hrlich", "egoistisch", "frustrierend",
            "ausschw√§rmend", "eigenn√ºtzig"
          ],
          schwaechen: [
            "freundlich", "vertrauensw√ºrdig", "zug√§nglich", "gl√ºcklich", "vertrauensvoll",
            "aufrichtig", "individualistisch", "vorausdenkend"
          ]
        },
        "Eiche": {
          staerken: [
            "kenntnisreich", "entscheidungsfreudig", "intelligent", "erfahren",
            "stimulierend", "inspirierend", "begeistert", "wie eltern", "zuverl√§ssig",
            "menschenfreundlich", "zug√§nglich", "selten"
          ],
          schwaechen: [
            "egoistisch", "desinteressiert", "faul", "emotional", "aggressiv"
          ]
        },
        "Klapperschlange": {
          staerken: [
            "politisch", "gerissen", "defensiv", "reaktiv", "unsicher", "laut",
            "doppelz√ºngig", "spaltend", "√ºberlebend", "angepasst an raue umgebungen"
          ],
          schwaechen: [
            "vertrauensw√ºrdig", "aufrichtig", "treu", "vertrauensvoll", "gl√ºcklich",
            "kontaktfreudig", "einladend"
          ]
        },
        "Faultier": {
          staerken: [
            "langsam", "m√ºde", "minimalistisch", "f√ºgsam", "faul"
          ],
          schwaechen: [
            "kontaktfreudig", "eifrig", "enthusiastisch", "produktiv", "gesch√§ftig",
            "anpassungsf√§hig", "gemeinschaftsorientiert", "n√ºtzlich"
          ]
        },
        "Dinosaurier": {
          staerken: [
            "m√ºde", "pessimistisch", "ver√§nderungsscheu", "fremdenfeindlich", "zur√ºckgezogen",
            "kampferprobt", "hart im nehmen", "negativ", "reflektierend", "nostalgisch", "problematisch"
          ],
          schwaechen: [
            "vision√§r", "anpassungsf√§hig", "kooperativ", "offen", "angepasst", "scharfsinnig",
            "gemeinschaftsorientiert", "opportunistisch", "jugendlich", "sozial"
          ]
        },
        "Einhorn": {
          staerken: [
            "perfekt", "ehrlich", "arrogant", "unnahbar", "ehrgeizig",
            "frustrierend", "unsicher", "kontrollierend", "gef√§hrlich", "inkonsistent", "nostalgisch"
          ],
          schwaechen: [
            "realistisch", "selbstbewusst", "offen", "stimulierend", "vertrauensw√ºrdig",
            "bescheiden", "ehrlich", "vorausdenkend", "motivierend"
          ]
        },
        "Geier": {
          staerken: [
            "gemein", "angepasst", "aasfressend", "egozentrisch", "gef√§hrlich", "opportunistisch",
            "politisch", "wetteifernd", "schlau", "geduldig"
          ],
          schwaechen: [
            "wohlwollend", "vertrauensw√ºrdig", "gl√ºcklich", "teamorientiert", "mutig",
            "offen", "angenehm", "sozial"
          ]
        },
        "Wal": {
          staerken: [
            "intelligent", "inspirierend", "kenntnisreich", "m√§chtig", "sozial",
            "gemeinschaftsorientiert", "selbstgrenzend", "unfallgef√§hrdet", "zur√ºckhaltend",
            "behutsam", "vom aussterben bedroht"
          ],
          schwaechen: [
            "anpassungsf√§hig", "aggressiv", "faul", "arrogant", "gef√§hrlich", "manipulativ"
          ]
        },
        "Hybrid": {
          staerken: [
            "arrogant", "ehrgeizig", "gesch√§ftig", "extravertiert", "gebildet", "weitschweifig",
            "egoistisch", "sch√∂n", "modisch", "kompetent"
          ],
          schwaechen: [
            "erfahren", "vertrauensw√ºrdig", "tolerant", "geduldig", "f√ºrsorglich", "gr√ºndlich", "anpassungsf√§hig"
          ]
        },
        "Yak": {
          staerken: [
            "st√ºrmisch", "enthusiastisch", "taktisch", "freundlich", "frustrierend", "fr√∂hlich",
            "spielerisch", "energisch", "sozial", "gl√ºcklich", "fokussiert"
          ],
          schwaechen: [
            "vorsichtig", "geduldig", "erfahren", "r√ºcksichtsvoll", "zur√ºckhaltend", "bescheiden",
            "sanftm√ºtig", "langsam", "strategisch", "selbstbewusst", "intelligent"
          ]
        }
      };

      // Initialisiere das Mapping-Objekt
      const similarityMapping = {};
      Object.keys(animalProperties).forEach(animal => {
        similarityMapping[animal] = [];
      });
      // Vergleiche jedes Tier mit allen anderen
      Object.keys(animalProperties).forEach(animal => {
        Object.keys(animalProperties).forEach(otherAnimal => {
          if (animal === otherAnimal) return; // Selbstvergleich √ºberspringen
          const strengthsAnimal = animalProperties[animal].staerken;
          const strengthsOther = animalProperties[otherAnimal].staerken;
          const commonStrengths = strengthsAnimal.filter(strength => strengthsOther.includes(strength));
          if (commonStrengths.length > 0) {
            similarityMapping[animal].push({
              animal: otherAnimal,
              commonStrengths: commonStrengths,
              similarityScore: commonStrengths.length
            });
          }
        });
      });
      console.log(similarityMapping);

      // Definition der tierEigenschaften
      const tierEigenschaften = {
        "Ameise": ["Struktur", "Sozialverhalten"],
        "Biene": ["Struktur", "Sozialverhalten"],
        "Cham√§leon": ["Flexibilit√§t", "Strategie"],
        "Hund": ["Empathie", "Sozialverhalten"],
        "Adler": ["Strategie", "Durchsetzung"],
        "Katze": ["Strategie", "Flexibilit√§t"],
        "Gibbon": ["Kreativit√§t", "Sozialverhalten"],
        "Hy√§ne": ["Durchsetzung", "Strategie"],
        "Insekt_n√ºtzlich": ["Empathie", "Kreativit√§t"],
        "Insekt_l√§stig": ["Flexibilit√§t", "Durchsetzung"],
        "Schakal": ["Durchsetzung", "Sozialverhalten"],
        "L√∂we": ["Durchsetzung", "Strategie"],
        "Maus": ["Struktur", "Emotionale Stabilit√§t"],
        "Parasit": ["Flexibilit√§t", "Strategie"],
        "Eule": ["Strategie", "Empathie"],
        "Piranha": ["Durchsetzung", "Flexibilit√§t"],
        "Eiche": ["Struktur", "Emotionale Stabilit√§t"],
        "Klapperschlange": ["Strategie", "Flexibilit√§t"],
        "Faultier": ["Emotionale Stabilit√§t", "Struktur"],
        "Dinosaurier": ["Struktur", "Emotionale Stabilit√§t"],
        "Einhorn": ["Kreativit√§t", "Empathie"],
        "Geier": ["Strategie", "Flexibilit√§t"],
        "Wal": ["Empathie", "Emotionale Stabilit√§t"],
        "Hybrid": ["Kreativit√§t", "Durchsetzung"],
        "Yak": ["Sozialverhalten", "Emotionale Stabilit√§t"],
        "Kind": ["Kreativit√§t", "Empathie"]
      };

      // Mapping CODE -> Tier
      const codeToTier = {
        S1: "Adler",   S2: "Ameise",   R1: "Yak",     R2: "Katze",
        S3: "Biene",   S4: "Cham√§leon", R3: "Parasit", R4: "Wal",
        S5: "Dinosaurier", S6: "Einhorn", R5: "Schakal", R6: "Piranha",
        S7: "Eiche",   S8: "Eule",     R7: "Maus",    R8: "L√∂we",
        S9: "Faultier", S10: "Geier",   R11: "Insekt_l√§stig", R12: "Insekt_n√ºtzlich",
        S11: "Gibbon", S12: "Hund",    R9: "Klapperschlange", R10: "Kind",
        S13: "Hybrid", S14: "Hy√§ne",   R15: "Hund",   R16: "Gibbon",
        S15: "Insekt_n√ºtzlich", S16: "Insekt_l√§stig", R13: "Hy√§ne", R14: "Hybrid",
        S17: "Kind",   S18: "Klapperschlange", R19: "Eule", R20: "Eiche",
        S19: "L√∂we",   S20: "Maus",    R21: "Einhorn", R22: "Dinosaurier",
        S21: "Piranha", S22: "Schakal", R17: "Geier",  R18: "Faultier",
        S23: "Wal",    S24: "Parasit", R25: "Ameise", R26: "Adler",
        S25: "Katze",  S26: "Yak",     R23: "Cham√§leon", R24: "Biene"
      };

      // Antwortkombinationen f√ºr Frage 14 und 15
      const comboMapping = {
        C1: ["Adler", "Ameise", "Biene", "Cham√§leon", "Wal", "Einhorn"],
        C2: ["Yak", "Katze", "Parasit", "Dinosaurier", "Schakal", "Piranha"],
        C3: ["Eiche", "Eule", "Maus", "L√∂we", "Faultier", "Geier", "Hybrid"],
        C4: ["Insekt_l√§stig", "Insekt_n√ºtzlich", "Klapperschlange", "Kind", "Hy√§ne", "Hund", "Gibbon"]
      };

      // Tier-Beschreibungen
      const tierTexte = {
        "Ameise": { kurz: " Organisiert, teamorientiert, methodisch", symbolischF√ºr: "Teamgeist" },
        "Biene": { kurz: " Fleissig, verantwortungsbewusst, anpassungsf√§hig", symbolischF√ºr: "Zusammenhalt" },
        "Cham√§leon": { kurz: " Anpassungsf√§hig, vision√§r, teils manipulativ", symbolischF√ºr: "Wandlungsf√§higkeit" },
        "Hund": { kurz: " Begeistert, emotional, offen", symbolischF√ºr: "Treue" },
        "Adler": { kurz: " Intuitiv, strategisch, wetteifernd", symbolischF√ºr: "Weitblick" },
        "Katze": { kurz: " Denkend, unabh√§ngig, rebellisch", symbolischF√ºr: "Freiheit" },
        "Gibbon": { kurz: " Kontaktfreudig, reflektierend, teils distanziert", symbolischF√ºr: "Kommunikation" },
        "Hy√§ne": { kurz: " Strategisch, ehrgeizig, aggressiv", symbolischF√ºr: "Zielstrebigkeit" },
        "Insekt_n√ºtzlich": { kurz: " Unterst√ºtzend, einfallsreich, positiv", symbolischF√ºr: "N√ºtzlichkeit" },
        "Insekt_l√§stig": { kurz: " Eigensinnig, unberechenbar, oft st√∂rend", symbolischF√ºr: "Hartn√§ckigkeit" },
        "Schakal": { kurz: " Individualistisch, aggressiv, rebellisch", symbolischF√ºr: "Unabh√§ngigkeit" },
        "L√∂we": { kurz: " Intuitiv, machtbewusst, strategisch", symbolischF√ºr: "Kraft" },
        "Maus": { kurz: " Denkend, vorsichtig, zuverl√§ssig", symbolischF√ºr: "Sicherheit" },
        "Parasit": { kurz: " Unsichtbar, manipulativ, anpassungsf√§hig", symbolischF√ºr: "Tarnung" },
        "Eule": { kurz: " Weise, logisch, reflektierend", symbolischF√ºr: "Weisheit" },
        "Piranha": { kurz: " Gef√§hrlich, handlungsorientiert, manipulativ", symbolischF√ºr: "Aggression" },
        "Eiche": { kurz: " Stark, produktiv, inspirierend", symbolischF√ºr: "Stabilit√§t" },
        "Klapperschlange": { kurz: " Gef√§hrlich, intelligent, gerissen", symbolischF√ºr: "Gerissenheit" },
        "Faultier": { kurz: " Geduldig, bescheiden, langsam", symbolischF√ºr: "Gelassenheit" },
        "Dinosaurier": { kurz: " Stark, distanziert, zur√ºckgezogen", symbolischF√ºr: "Uralte Macht" },
        "Einhorn": { kurz: " Vision√§r, anpassungsf√§hig, naiv", symbolischF√ºr: "Tr√§umerei" },
        "Geier": { kurz: " Vorausschauend, intuitiv, wenig loyal", symbolischF√ºr: "Schlau" },
        "Wal": { kurz: " Vertrauensw√ºrdig, stark, emotional", symbolischF√ºr: "Tiefe" },
        "Hybrid": { kurz: " Intelligent, anpassungsf√§hig, distanziert", symbolischF√ºr: "Universalit√§t" },
        "Yak": { kurz: " Robust, bescheiden, strategisch", symbolischF√ºr: "Ausdauer" },
        "Kind": { kurz: " Begeistert, inspirierend, emotional", symbolischF√ºr: "Unbeschwertheit" }
      };

      // Gegenspieler-Logik
      const gegenspieler = {
        "Adler": "Kind",
        "Kind": "Adler",
        "Ameise": "Hybrid",
        "Hybrid": "Ameise",
        "Biene": "Hy√§ne",
        "Hy√§ne": "Biene",
        "Cham√§leon": "Eule",
        "Eule": "Cham√§leon",
        "Hund": "Katze",
        "Katze": "Hund",
        "Gibbon": "Parasit",
        "Parasit": "Gibbon",
        "L√∂we": "Maus",
        "Maus": "L√∂we",
        "Wal": "Schakal",
        "Schakal": "Wal",
        "Insekt_n√ºtzlich": "Insekt_l√§stig",
        "Insekt_l√§stig": "Insekt_n√ºtzlich",
        "Piranha": "Faultier",
        "Faultier": "Piranha",
        "Einhorn": "Geier",
        "Geier": "Einhorn",
        "Eiche": "Klapperschlange",
        "Klapperschlange": "Eiche",
        "Yak": "Dinosaurier",
        "Dinosaurier": "Yak"
      };

      // Konflikt-Texte zwischen den Tieren
      const tierKonflikte = {
        "Adler": {
          "Kind": "Zwischen Adler und Kind k√∂nnen Spannungen entstehen, da der strategische Adler einen klaren Plan verfolgt, w√§hrend das Kind impulsiv agiert.",
          "Wal": "Adler und Wal k√∂nnen unterschiedliche Arbeitsrhythmen haben ‚Äì Adler strebt nach Schnelligkeit, Wal setzt auf Ruhe."
        },
        "Ameise": {
          "Piranha": "Ameise und Piranha zeigen unterschiedliche Herangehensweisen: Die Ameise plant strukturiert, der Piranha handelt impulsiv.",
          "Hybrid": "Ameise und Hybrid k√∂nnen in ihrer Methodik auseinandergehen ‚Äì klare Abl√§ufe versus flexible, wechselnde Ans√§tze."
        },
        "Biene": {
          "Hy√§ne": "Biene und Hy√§ne k√∂nnen Spannungen erleben, da die teamorientierte Biene auf Kooperation setzt, w√§hrend die Hy√§ne eher eigenst√§ndig agiert.",
          "Dinosaurier": "Biene und Dinosaurier stehen oft unterschiedlich: Biene arbeitet f√ºrs Team, Dinosaurier agiert pragmatisch."
        },
        "Cham√§leon": {
          "Eule": "Cham√§leon und Eule k√∂nnen in ihrer Herangehensweise kollidieren ‚Äì das Cham√§leon √§ndert oft den Kurs, die Eule sucht klare, logische Linien.",
          "Eiche": "Cham√§leon und Eiche haben unterschiedliche Erwartungen: Wandel versus Best√§ndigkeit."
        },
        "Hund": {
          "Katze": "Hund und Katze k√∂nnen unterschiedliche Bed√ºrfnisse haben ‚Äì der Hund sucht N√§he, die Katze bevorzugt Unabh√§ngigkeit.",
          "Parasit": "Hund und Parasit unterscheiden sich darin, wie offen sie agieren ‚Äì der Hund ist direkt, der Parasit eher taktisch zur√ºckhaltend."
        },
        "Katze": {
          "Hund": "Auch wenn Hund und Katze eng beieinander liegen, k√∂nnen Konflikte entstehen, wenn der Wunsch nach N√§he (Hund) auf das Bed√ºrfnis nach Distanz (Katze) trifft.",
          "Gibbon": "Katze und Gibbon k√∂nnen Spannungen haben, da die ruhige Katze sich nicht immer in das kommunikative Temperament des Gibbons einf√ºgt."
        },
        "Gibbon": {
          "Yak": "Gibbon und Yak haben unterschiedliche Kommunikationsstile ‚Äì Gibbon ist sehr offen, w√§hrend Yak auf Stabilit√§t und Ruhe setzt.",
          "Parasit": "Gibbon und Parasit k√∂nnen sich uneinig sein, da der offene Gibbon direktere Gespr√§che bevorzugt, der Parasit subtiler agiert."
        },
        "Hy√§ne": {
          "Einhorn": "Hy√§ne und Einhorn unterscheiden sich deutlich: Hy√§ne ist kontrollierend und zielstrebig, w√§hrend Einhorn idealistisch und tr√§umerisch agiert.",
          "Biene": "Hy√§ne und Biene k√∂nnen Spannungen erleben, da die zielorientierte Hy√§ne eher eigenst√§ndig agiert, die Biene aber auf Teamarbeit setzt."
        },
        "Insekt_n√ºtzlich": {
          "Parasit": "Das n√ºtzliche Insekt und der Parasit haben unterschiedliche Priorit√§ten ‚Äì Unterst√ºtzung versus taktisches Verhalten.",
          "Klapperschlange": "Insekt_n√ºtzlich und Klapperschlange gehen unterschiedlich vor: Kooperative Ans√§tze versus kritische Impulse."
        },
        "Insekt_l√§stig": {
          "Kind": "Insekt_l√§stig und Kind k√∂nnen aufeinanderprallen, da das unberechenbare Insekt das emotionale Kind √ºberfordern kann.",
          "Hund": "Insekt_l√§stig provoziert, w√§hrend der Hund auf Harmonie bedacht ist ‚Äì das f√ºhrt zu Spannungen."
        },
        "Schakal": {
          "Wal": "Schakal und Wal k√∂nnen unterschiedliche Schwerpunkte haben ‚Äì taktisches Vorgehen versus emotionale Tiefe.",
          "Kind": "Schakal und Kind haben oft unterschiedliche Priorit√§ten: Strukturiertes Handeln versus impulsives Verhalten."
        },
        "L√∂we": {
          "Maus": "L√∂we und Maus stehen sich oft gegen√ºber: Der dominante L√∂we agiert energisch, w√§hrend die vorsichtige Maus sich eher zur√ºckzieht.",
          "Eule": "L√∂we und Eule k√∂nnen in ihrem Tempo auseinandergehen ‚Äì schnelle Entscheidungen versus analytische √úberlegungen."
        },
        "Maus": {
          "Hy√§ne": "Maus und Hy√§ne k√∂nnen Spannungen erzeugen, da die ruhige Maus Stabilit√§t sucht, w√§hrend Hy√§ne kraftvoll und fordernd agiert.",
          "L√∂we": "Maus und L√∂we zeigen unterschiedliche Dynamiken: Vorsicht versus dominante Pr√§senz."
        },
        "Parasit": {
          "Wal": "Parasit und Wal haben unterschiedliche Ans√§tze: W√§hrend Wal auf Klarheit und Tiefe setzt, wirkt Parasit oft diffus.",
          "Gibbon": "Parasit und Gibbon bewegen sich in unterschiedlichen Kommunikationswelten ‚Äì subtil versus offen."
        },
        "Wal": {
          "Schakal": "Wal und Schakal k√∂nnen Spannungen haben, da Wal auf emotionale Stabilit√§t setzt, w√§hrend Schakal taktisch vorgeht.",
          "Kind": "Wal und Kind unterscheiden sich: Der Wal sucht Ruhe, das Kind bringt lebhafte, emotionale Impulse ein."
        },
        "Dinosaurier": {
          "Einhorn": "Dinosaurier und Einhorn haben unterschiedliche Herangehensweisen: Sicherheit versus idealistische Visionen.",
          "Cham√§leon": "Dinosaurier und Cham√§leon k√∂nnen in ihren Ans√§tzen kollidieren ‚Äì Best√§ndigkeit versus Wandel."
        },
        "Einhorn": {
          "Hy√§ne": "Einhorn und Hy√§ne zeigen unterschiedliche Temperamente ‚Äì das Einhorn lebt in Visionen, w√§hrend Hy√§ne zielstrebig agiert.",
          "Klapperschlange": "Einhorn und Klapperschlange k√∂nnen in ihrer Herangehensweise auseinandergehen ‚Äì Harmonie versus direkte Impulse."
        },
        "Eiche": {
          "Cham√§leon": "Eiche und Cham√§leon k√∂nnen aufeinanderprallen, da Eiche auf Best√§ndigkeit setzt und Cham√§leon h√§ufig flexibel agiert.",
          "Piranha": "Eiche und Piranha haben unterschiedliche Zug√§nge ‚Äì √ºberlegte Planung versus impulsives Handeln."
        },
        "Eule": {
          "Hy√§ne": "Eule und Hy√§ne k√∂nnen Spannungen haben, da die ruhige Eule tiefgr√ºndige Analysen bevorzugt, w√§hrend Hy√§ne schneller agiert.",
          "Kind": "Eule und Kind unterscheiden sich: Eule w√§gt sorgf√§ltig ab, das Kind handelt impulsiv."
        },
        "Klapperschlange": {
          "Wal": "Klapperschlange und Wal k√∂nnen aufeinanderprallen, da die direkte Klapperschlange oft herausfordernd wirkt und der Wal Sicherheit sucht.",
          "Kind": "Klapperschlange und Kind stehen in Kontrast ‚Äì strukturierte Herangehensweise versus spontane Reaktionen."
        },
        "Faultier": {
          "Adler": "Faultier und Adler haben unterschiedliche Dynamiken ‚Äì Faultier arbeitet in Ruhe, Adler strebt nach H√∂herem.",
          "Piranha": "Faultier und Piranha arbeiten in verschiedenen Tempi ‚Äì was zu Spannungen f√ºhren kann."
        },
        "Geier": {
          "Cham√§leon": "Geier und Cham√§leon k√∂nnen in ihrer Planung auseinandergehen ‚Äì strukturierte Ans√§tze versus wechselnde Strategien.",
          "Kind": "Geier und Kind bewegen sich in unterschiedlichen Zeiten ‚Äì vorausschauend versus im Hier und Jetzt."
        },
        "Piranha": {
          "Eule": "Piranha und Eule k√∂nnen Spannungen erzeugen, da Piranha schnelle Entscheidungen trifft, w√§hrend die Eule erst analysiert.",
          "Faultier": "Piranha und Faultier arbeiten in unterschiedlichen Tempi ‚Äì was zu unpassenden Dynamiken f√ºhrt."
        },
        "Kind": {
          "Adler": "Kind und Adler k√∂nnen in ihrer Ausrichtung auseinandergehen ‚Äì impulsives Entdecken versus strukturierte Planung.",
          "Geier": "Kind und Geier haben unterschiedliche Priorit√§ten ‚Äì spontan versus langfristig denkend."
        },
        "Yak": {
          "Piranha": "Yak ist bedacht ‚Äì Piranha handelt impulsiv. Diese unterschiedliche Herangehensweise kann zu Spannung f√ºhren.",
          "Kind": "Yak sch√§tzt Stabilit√§t, w√§hrend das Kind unberechenbar agiert ‚Äì das erfordert Verst√§ndnis."
        },
        "Einhorn": {
          "Hy√§ne": "Einhorn und Hy√§ne prallen in ihren Ans√§tzen aufeinander ‚Äì idealistische Visionen versus n√ºchterne Zielorientierung.",
          "Schakal": "Einhorn und Schakal haben unterschiedliche Herangehensweisen ‚Äì vertr√§umt versus kontrollierend."
        },
        "Hybrid": {
          "Ameise": "Hybrid und Ameise unterscheiden sich in ihrer Methodik ‚Äì flexibles Denken versus klare Ordnung.",
          "Yak": "Hybrid und Yak haben unterschiedliche Schwerpunkte ‚Äì unkonventionelle Ans√§tze versus best√§ndige Ausdauer."
        }
      };

 formElem.addEventListener("submit", function(e) {
  e.preventDefault();

  // üß† Schritt 1: attributeData vorbereiten
  attributeData = {}; // ‚Üê falls du es ganz oben `let` deklariert hast
  Object.values(tierEigenschaften).flat().forEach(attr => {
    attributeData[attr] = { sum: 0, count: 0 };
  });

  // 1) Einmaliges Holen der Eingaben
  const formData = new FormData(formElem);
  const modus    = document.querySelector('input[name="modus"]:checked').value;  // "selbst" oder "fremd"

  // Bestehende Elemente ausblenden:
  document.querySelector(".logo-container").style.display = "none";
  
  // Falls der Einleitungstext vorhanden ist, ausblenden
  const introTextElem = document.querySelector(".intro-text");
  if (introTextElem) {
    introTextElem.style.display = "none";
  }

// üßº Situationsfeld ausblenden (Label + Textarea)
const situationLabel = document.querySelector('label[for="situation"]');
const situationTextarea = document.getElementById('situation');

if (situationLabel) situationLabel.style.display = "none";
if (situationTextarea) situationTextarea.style.display = "none";
  
// Weitere Elemente ausblenden:
document.querySelector("h1").style.display = "none";
document.querySelector(".logo-container").style.display = "none"; // falls noch da
// ‚Ä¶
document.querySelectorAll(".user-inputs").forEach(el => el.style.display = "none");

// Formular und Button ausblenden
document.getElementById("fragebogen").style.display     = "none";
document.getElementById("auswertenBtn").style.display  = "none";

  // "Willkommen beim OrganisationsZoo" ausblenden:
  // Wir gehen davon aus, dass der Text in einem <h2> innerhalb eines div mit "text-align: center" steht
  const welcomeElem = document.querySelector("div[style*='text-align: center'] h2");
  if (welcomeElem && welcomeElem.textContent.trim().includes("Willkommen beim OrganisationsZoo")) {
    // Blendet den gesamten Container (das div, in dem das h2 steht) aus
    welcomeElem.parentElement.style.display = "none";
  }

        // Ergebnisbereich und Print-Button sichtbar machen
        ergebnisElem.style.display = "block";
        printButton.style.display = "block";
        ergebnisElem.style.position = "relative";

        // Werte aus den Eingabefeldern √ºbernehmen
        var userName = document.querySelector('input[name="name"]').value;
        var userEmail = document.querySelector('input[name="email"]').value;
const situationText = document.getElementById("situation").value.trim() || "Keine konkrete Situation angegeben";

ergebnisElem.insertAdjacentHTML('afterbegin', `
  <div id="auswertung-start" style="text-align:center; margin-bottom:1rem;">
    <img
      src="eule-organisationszoo.png"
      alt="Eule"
      style="height:120px; width:auto; object-fit:cover;"
    />
  </div>
  <h2 style="
    text-align:center;
    font-size:1.8em;
    margin:0 0 1.5rem;
    font-weight:700;
    color:inherit;
  ">
    Willkommen im <span style="color:#E44A00;">OrganisationsZoo</span>
  </h2>

 <!-- Links: Kontaktdaten -->
    <div id="left-info" style="
      flex: 1;
      font-size: 0.75em;
      color: inherit;
      line-height: 1.4;
    ">
      <div>
        <span style="color:#E44A00; font-weight:700;">
          OrganisationsZoo
        </span>
      </div>
      <div>
        Nicole¬†St√∂cker, Peter¬†Renner und Simon¬†Bertogg
      </div>
      <div>
        Murwiesenstrasse¬†30,&nbsp;
        <span style="white-space:nowrap;">
          8057¬†Z√ºrich,¬†Schweiz
        </span>
      </div>
      <div>
        Tel:¬†+41¬†79¬†634¬†07¬†50
      </div>
      <div>
        <a href="mailto:info@organisationszoo.ch" style="color:inherit; text-decoration:none;">
          info@organisationszoo.ch
        </a>
      </div>
      <!-- hier den Abstand einf√ºgen -->
      <div style="height:0.75rem;"></div>

      <div><strong>Name:</strong> ${userName}</div>
      <div><strong>E‚ÄëMail:</strong> ${userEmail}</div>
    </div>
  </div>
`);

requestAnimationFrame(() => {
  const ziel = document.getElementById("auswertung-start");
  if (ziel) {
    ziel.scrollIntoView({ behavior: "smooth", block: "start" });
  } else {
    console.warn("Scrollziel nicht gefunden!");
  }
});

// Reflexionstext erstellen und anh√§ngen
const reflekt = document.createElement('div');
reflekt.classList.add('reflexion-text');
reflekt.style.marginTop = '1.5rem';
reflekt.innerHTML = `
  <h3 style="font-size:1em; color:#E44A00; margin-bottom:0.5rem;">
Was dein Tierprofil dir zeigt ‚Äì und warum es mehr als nur spannend ist</h3>
<p>
  Dein Ergebnis ist mehr als eine nette Spielerei: 
  <strong>Es spiegelt deine aktuelle Verhaltensdynamik wider.</strong> 
  Jedes Tier steht f√ºr bestimmte Denk-, F√ºhl- und Handlungsweisen ‚Äì <em>dein individueller Mix macht dich einzigartig!</em>
</p>

<p>
  Vielleicht tr√§gst du den unerm√ºdlichen Fleiss einer <strong>Ameise</strong> in dir, die Organisation einer <strong>Biene</strong> oder die Weisheit einer <strong>Eule</strong>. 
  Vielleicht erkennst du dich in der vision√§ren Klarheit eines <strong>Adlers</strong> oder der spielerischen Energie eines <strong>Gibbons</strong> wieder? 
  Auch taktisches Geschick wie ein <strong>Cham√§leon</strong> oder die entschlossene Kraft eines <strong>Schakals</strong> k√∂nnten dich pr√§gen.
</p>

<p>
  Vielleicht wirken in dir auch der kindliche Enthusiasmus eines <strong>Kindes</strong>, die Anpassungsf√§higkeit eines <strong>Insekts</strong> oder die Gelassenheit eines <strong>Wals</strong> ‚Äì oder du tr√§gst die k√§mpferische H√§rte eines <strong>Dinosauriers</strong> in dir. 
  Und manchmal zeigt sich auch der Wunsch eines <strong>Einhorns</strong>, besonders, idealistisch und bedeutend zu sein.
</p>

<p>
  Diese Tierbilder laden dich ein, deine St√§rken und Entwicklungspotenziale mit Leichtigkeit und Tiefe zu entdecken ‚Äì 
  <strong>frei von Schubladen, offen f√ºr echte Reflexion.</strong>
</p>

<p>
  Lust, dein Profil gemeinsam zu erkunden und weiterzuentwickeln? 
  <strong>Dann ist der Workshop genau das Richtige f√ºr dich!</strong>
</p>

<p>
  <em>Pers√∂nlichkeitsentwicklung darf Spass machen ‚Äì Erkenntnisse entstehen am besten im lebendigen Austausch!</em>
</p>
`;
ergebnisElem.appendChild(reflekt);

const breakAfterReflekt = document.createElement('div');
breakAfterReflekt.className = 'page-break';
ergebnisElem.appendChild(breakAfterReflekt);

// 3) Profil-Titel + Situation unter dem Reflexionstext
ergebnisElem.insertAdjacentHTML('beforeend', `
  <div style="
    text-align:center;
    font-size:1.1em;
    font-weight:bold;
    color:#E44A00;
    line-height:1.3;
    margin-top:2rem;
    margin-bottom:1rem;
  ">
    Ihr Verhaltensprofil zur gew√§hlten Situation
    <div style="
      font-size:0.85em;
      font-weight:normal;
      color:inherit;
      margin-top:0.25rem;
    ">
      ${situationText}
    </div>
  </div>
`);


// direkt unter dem Insert des Ergebnis-Headers:
 const formData2 = new FormData(formElem);
const tierCounts = {};
// attributeData wurde ja bereits initialisiert weiter oben

// ---------------------------
// Schritt¬†3: Punkte aus den Antworten sammeln
// ---------------------------
for (let i = 0; i < questions.length; i++) {
  const q = questions[i];
  for (let key in q.answers) {
    const code = q.answers[key].code;
    const wert = parseInt(formData.get(`frage${i}_${code}`)) || 0;
    const tier = codeToTier[code];
    if (!tier) continue;

    // Direkte Punktevergabe f√ºr das zugeordnete Tier:
    tierCounts[tier] = (tierCounts[tier] || 0) + wert;

    // Bonuspunkte f√ºr √§hnliche Tiere ‚Äì dynamisch gewichtet
    const similarAnimals = similarityMapping[tier] || [];
    similarAnimals.forEach(sim => {
      const similarityBonus = (wert / 4) * 0.5;
      tierCounts[sim.animal] = (tierCounts[sim.animal] || 0) + similarityBonus;
    });

    // Eigenschaften des direkten Tiers dynamisch aufbauen
    if (tierEigenschaften[tier]) {
      tierEigenschaften[tier].forEach(attr => {
        if (!attributeData[attr]) {
          attributeData[attr] = { sum: 0, count: 0 };
        }
        attributeData[attr].sum += wert;
        attributeData[attr].count++;
      });
    }

    // Eigenschaften der √§hnlichen Tiere (reduziert gewichtet)
    similarAnimals.forEach(sim => {
      const simTier = sim.animal;
      const similarityBonus = (wert / 4) * 0.5;

      if (tierEigenschaften[simTier]) {
        tierEigenschaften[simTier].forEach(attr => {
          if (!attributeData[attr]) {
            attributeData[attr] = { sum: 0, count: 0 };
          }
          attributeData[attr].sum += similarityBonus;
          attributeData[attr].count++;
        });
      }
    });

const attributePercentages = {};
for (let attr in attributeData) {
  const sum = attributeData[attr].sum;
  const count = attributeData[attr].count;
  attributePercentages[attr] = Math.round((sum / (count * 4)) * 100);
}

// üîµ RELATIVE SKALIERUNG (Option A ‚Äì empfohlen)
const maxPercent = Math.max(...Object.values(attributePercentages)) || 1;

Object.keys(attributePercentages).forEach(attr => {
  attributePercentages[attr] = Math.round(
    (attributePercentages[attr] / maxPercent) * 100
  );
});

    // Gegenspieler-Abzug dynamisch (Schritt¬†2)
    if (wert > 2) {
      const gegenspielerTier = gegenspieler[tier];
      if (gegenspielerTier) {
        const gegenspielerAbzug = (wert - 2) / 2;
        tierCounts[gegenspielerTier] = (tierCounts[gegenspielerTier] || 0) - gegenspielerAbzug;
      }
    }
  }
}

// Summe aller Punkte (falls ben√∂tigt)
const gesamtPunkte = Object.values(tierCounts).reduce((sum, v) => sum + v, 0);

// ---------------------------
// Gesamtauswertung Top-5 Tierprofile
// ---------------------------
ergebnisElem.innerHTML += `<h2>‚ÄûDeine tierischen Verhaltensmuster‚Äú</h2>`;
const sortedTiers = Object.entries(tierCounts).sort((a, b) => b[1] - a[1]);
const top5 = sortedTiers.slice(0, 5);

// Nur noch einmal den Wrapper mit deiner Css‚ÄëKlasse erzeugen:
const chartWrap = document.createElement("div");
chartWrap.className = "chartWrap";

const maxPunkte = 25;

top5.forEach(([tier, val]) => {
  const fileName = makeFileName(tier);
  const canvasId = `tierChart_${fileName}`;

  const div = document.createElement("div");
  div.className = "tier-profil";
  div.innerHTML = `
    <div class="tier-bild">
     <img src="${makeFileName(tier)}.png" alt="${tier}" style="width:100%; height:auto; display:block;">
    </div>
    <div class="tier-text">
      <strong>${tier}</strong>
      <p>${(tierTexte[tier] || {}).kurz || ''}</p>
      <span>Symbolisch f√ºr: ${(tierTexte[tier] || {}).symbolischF√ºr || '-'}</span>
    </div>
    <div class="tier-diagramm">
<canvas id="${canvasId}" width="80" height="80"></canvas>
    </div>
  `;

  chartWrap.appendChild(div);

setTimeout(() => {
  new Chart(
    document.getElementById(canvasId).getContext("2d"),
    {
      type: 'pie',
      data: {
        labels: [], // Keine Labels im Diagramm
        datasets: [{
          data: [val, maxPunkte - val],
          backgroundColor: ["#E44A00", "#FFD1B2"],
          borderWidth: 0
        }]
      },
      options: {
        responsive: false,
        plugins: {
          legend: {
            display: false
          },
          tooltip: {
            enabled: false
          }
        }
      }
    }
  );
}, 10);
});

ergebnisElem.appendChild(chartWrap);

       // Annahme: 
// top5 ist ein Array von Arrays, z.B.: [ [ "Hund", 10 ], [ "Katze", 8 ], ... ]
// tierKonflikte ist ein Objekt, in dem du f√ºr jedes Tier (Schl√ºssel) ein Objekt mit Konfliktpartnern und Konflikttexten hast, z.B.:
// {
//    Hund: { Maus: "Hund jagt Maus.", Fuchs: "Hund vs Fuchs." },
//    Katze: { Hund: "Katze hat Angst vor Hund.", Maus: "Katze jagt Maus." },
//    ...
// }

const myAnimals = top5.map(item => item[0]); // Deine Top 5

// Erstelle ein Aggregationsobjekt, um Konfliktpunkte f√ºr Tiere (ausserhalb der Top‚Äë5) zu sammeln.
const conflictAggregation = {};
// Speichere zu jedem Konfliktpartner den (ersten) Konflikttext
const conflictTextAggregation = {};

// F√ºr jedes deiner Tiere, durchlaufe den Konfliktbaum:
myAnimals.forEach(myTier => {
  if (tierKonflikte[myTier]) {
    Object.entries(tierKonflikte[myTier]).forEach(([opponent, text]) => {
      // Nur Konflikte ber√ºcksichtigen, deren Gegner NICHT in den Top‚Äë5 sind.
      if (!myAnimals.includes(opponent)) {
        // Erh√∂he die Konfliktpunkte (hier rein als 1-Z√§hler, alternativ k√∂nntest du auch mit Gewichtung arbeiten)
        conflictAggregation[opponent] = (conflictAggregation[opponent] || 0) + 1;
        // Falls noch kein Text f√ºr diesen Gegner gespeichert wurde, speichere ihn
        if (!conflictTextAggregation[opponent]) {
          conflictTextAggregation[opponent] = text;
        }
      }
    });
  }
});

// Jetzt hast du z.‚ÄØB. conflictAggregation = { "Tiger": 3, "Elefant": 2, ... }

// Konvertiere das Aggregat in ein Array und sortiere absteigend nach Konfliktpunkten:
const sortedOpponents = Object.entries(conflictAggregation)
  .sort(([, countA], [, countB]) => countB - countA);

// Jetzt w√§hle die beiden Konfliktpartner mit den meisten Punkten aus:
if (sortedOpponents.length > 0) {
  const opponent1 = sortedOpponents[0][0];
  // Falls es mindestens zwei Gegner gibt, nehme den zweiten; ansonsten nur den ersten.
  const opponent2 = sortedOpponents.length > 1 ? sortedOpponents[1][0] : null;
  
  // Erstelle den Header:
  let conflictHeader = document.createElement("div");
  conflictHeader.innerHTML = "<h2 style='font-size: 1.5em;'>‚ÄûWo‚Äôs im Gehege kracht‚Ä¶‚Äú</h2>";
  ergebnisElem.appendChild(conflictHeader);

  // Erstelle den Container f√ºr die Konfliktpartner:
  const conflictDiv = document.createElement("div");
  conflictDiv.className = "tier-konflikt-container";

  // Erstelle HTML f√ºr den ersten Gegner:
  let conflictHTML = `
  <div class="tier-container">
    <div class="tier-bild">
      <img src="${makeFileName(opponent1)}.png" alt="${opponent1}" style="width:100%; height:auto; display:block;" />
    </div>
    <div class="tier-text">
      <strong>${opponent1}</strong>
      <p>${conflictTextAggregation[opponent1] || ""}</p>
    </div>
  </div>
`;

if (opponent2) {
  conflictHTML += `
    <div class="tier-container">
      <div class="tier-bild">
        <img src="${makeFileName(opponent2)}.png" alt="${opponent2}" style="width:100%; height:auto; display:block;" />
      </div>
      <div class="tier-text">
        <strong>${opponent2}</strong>
        <p>${conflictTextAggregation[opponent2] || ""}</p>
      </div>
    </div>
  `;
}

  conflictDiv.innerHTML = conflictHTML;
  ergebnisElem.appendChild(conflictDiv);

const breakAfterGehege = document.createElement("div");
breakAfterGehege.className = "page-break";
ergebnisElem.appendChild(breakAfterGehege);
  
} else {
  // Wenn keine Konflikte gefunden wurden:
  let conflictHeader = document.createElement("div");
  conflictHeader.innerHTML = "<h2 style='font-size: 1.5em;'>Keine Konflikte erkannt.</h2>";
  ergebnisElem.appendChild(conflictHeader);
}

// ---------------------------
// Darstellung Top‚Äë5‚ÄëTiere pro Kategorie in Containern
// ---------------------------

// Farben & Layout
const containerStyle = `
  display: flex;
  align-items: center;
  justify-content: space-between;
  background: #f7f7f7;
  border-radius: 12px;
  padding: 16px 24px;
  margin-bottom: 20px;
  box-shadow: 0 2px 6px rgba(0,0,0,0.05);
`;
const tierStyle = `
  flex: 1;
  font-weight: bold;
  font-size: 1.1em;
`;
const categoryStyle = `
  flex: 1;
  text-align: center;
  font-weight: 600;
  font-size: 1em;
  color: #444;
`;
const beschreibungStyle = `
  flex: 2;
  font-size: 0.95em;
  color: #333;
  text-align: left;
`;


// Mapping: Kategorie ‚Üí relevante Frageindizes
const kategorienMapping = {
  "Teamarbeit & Zusammenarbeit": [0, 1, 9],
  "F√ºhrung & Verantwortung": [6, 7, 12],
  "Entscheidungsfindung & Strategische Planung": [5, 10],
  "Anpassungsf√§higkeit & Stressbew√§ltigung": [3, 11],
  "Selbstreflexion, Werte & Pers√∂nliche Entwicklung": [2, 4, 8]
};
// Tier-Beschreibungen je Kategorie (siehe dein bestehendes Objekt)
const categoryDescriptions = {
  "Teamarbeit & Zusammenarbeit": {
   "Ameise": "Organisiert und zielstrebig, sorgt f√ºr Struktur im Team.",
    "Biene": "Fleissig und gemeinschaftlich, f√∂rdert den Zusammenhalt.",
    "Cham√§leon": "Flexibel und kreativ, bringt neue Ideen ins Team.",
    "Hund": "Empathisch und loyal, st√§rkt den Teamgeist.",
    "Adler": "Kann inspirieren, neigt aber zu Individualismus.",
    "Katze": "Agiert eigenst√§ndig und bringt oft kritische Perspektiven ein.",
    "Gibbon": "Kommunikativ und reflektiert, moderiert gut in Gruppen.",
    "Hy√§ne": "Dominant und durchsetzungsstark, sorgt f√ºr klare Rollenverteilung.",
    "Insekt_n√ºtzlich": "Unterst√ºtzend und ideenreich, denkt l√∂sungsorientiert f√ºr das Team.",
    "Insekt_l√§stig": "Egoistisch und unruhig, kann Teamprozesse st√∂ren.",
    "Schakal": "Eigensinnig und rebellisch, bringt Spannung ins Team ‚Äì nicht immer konstruktiv.",
    "L√∂we": "F√ºhrungsstark, aber wenig teamorientiert ‚Äì lieber Anf√ºhrer als Mitl√§ufer.",
    "Maus": "Ruhig und vorsichtig, arbeitet gewissenhaft im Hintergrund.",
    "Parasit": "Anpassungsf√§hig, aber oft eigenn√ºtzig ‚Äì profitiert mehr als er beitr√§gt.",
    "Eule": "Weitsichtig und klug, bringt Tiefe in Diskussionen, aber bleibt lieber aussen vor.",
    "Piranha": "Zielorientiert, aber aggressiv ‚Äì kann Gruppendynamik unter Druck setzen.",
    "Eiche": "Standhaft und inspirierend, bringt Stabilit√§t ins Team.",
    "Klapperschlange": "Schlau und taktisch ‚Äì verfolgt eher eigene Interessen im Team.",
    "Faultier": "Geduldig und ruhig ‚Äì verlangsamt, aber harmonisiert Gruppenprozesse.",
    "Dinosaurier": "Erfahrungsreich, aber zur√ºckhaltend ‚Äì wirkt oft passiv im Team.",
    "Einhorn": "Vision√§r und idealistisch ‚Äì inspiriert, aber schwer greifbar im Alltag.",
    "Geier": "Anpassungsf√§hig, aber zur√ºckhaltend ‚Äì beobachtet mehr als er mitwirkt.",
    "Wal": "Vertrauensvoll und tiefgr√ºndig ‚Äì bringt emotionale Intelligenz ins Team.",
    "Hybrid": "Intelligent, aber distanziert ‚Äì zieht analytisches Denken Gruppenbindung vor.",
    "Yak": "Robust und loyal ‚Äì unterst√ºtzt konstant ohne viel Aufhebens.",
    "Kind": "Begeistert und kreativ ‚Äì belebt die Zusammenarbeit, braucht aber F√ºhrung."
  },
  "F√ºhrung & Verantwortung": {
     "Adler": "F√ºhrungspers√∂nlichkeit, vision√§r und entschlossen.",
    "Hybrid": "Vielseitig in der F√ºhrung, kombiniert Strategie mit Flexibilit√§t.",
    "L√∂we": "Dominant und charismatisch, aber manchmal autorit√§r.",
    "Hund": "Verantwortungsbewusst und kooperativ.",
    "Ameise": "Organisiert und teamorientiert ‚Äì √ºbernimmt Verantwortung im Kollektiv.",
    "Biene": "Pflichtbewusst und fleissig, tr√§gt viel zur Gemeinschaft bei.",
    "Cham√§leon": "Indirekt f√ºhrend, nutzt Anpassungsf√§higkeit strategisch.",
    "Katze": "Eigenverantwortlich und unabh√§ngig ‚Äì meidet klassische F√ºhrungsrollen.",
    "Gibbon": "Reflektierend und unterst√ºtzend ‚Äì f√ºhrt durch Dialog.",
    "Hy√§ne": "Durchsetzungsf√§hig und kontrollierend, oft dominant.",
    "Insekt_n√ºtzlich": "Hilfreich im Hintergrund ‚Äì √ºbernimmt Verantwortung ohne F√ºhrungsanspruch.",
    "Insekt_l√§stig": "Verantwortungsscheu, wirkt oft st√∂rend statt f√ºhrend.",
    "Schakal": "Rebellisch, √ºbernimmt ungern Verantwortung ‚Äì f√ºhrt lieber gegen den Strom.",
    "Maus": "Zur√ºckhaltend, √ºbernimmt Verantwortung nur in sicherem Rahmen.",
    "Parasit": "Vermeidet Verantwortung, agiert lieber im Schatten.",
    "Eule": "Weise und strategisch ‚Äì f√ºhrt durch Wissen und Erfahrung.",
    "Piranha": "Dominant und schnell entscheidend ‚Äì f√ºhrt eher durch Druck.",
    "Eiche": "Stark und konstant ‚Äì ein nat√ºrlicher Ruhepol in F√ºhrungsrollen.",
    "Klapperschlange": "Taktisch und politisch ‚Äì f√ºhrt verdeckt und berechnend.",
    "Faultier": "Meidet Verantwortung ‚Äì zu langsam f√ºr klassische F√ºhrungsrollen.",
    "Dinosaurier": "Traditionell und distanziert ‚Äì f√ºhrt durch Erfahrung, nicht durch N√§he.",
    "Einhorn": "Idealistisch und inspiriert ‚Äì aber oft zu tr√§umerisch f√ºr Verantwortung.",
    "Geier": "F√ºhrt selten ‚Äì wartet lieber ab, als zu agieren.",
    "Wal": "Emotional intelligent und vertrauensw√ºrdig ‚Äì √ºbernimmt Verantwortung mit Weitblick.",
    "Yak": "Verantwortungsvoll und stark ‚Äì f√ºhrt durch Best√§ndigkeit.",
    "Kind": "√úbernimmt spontan Verantwortung, aber ohne langfristige Perspektive."
  },
 "Entscheidungsfindung & Strategische Planung": {
    "Gibbon": "Kreativ und √ºberlegt, trifft fundierte Entscheidungen.",
    "Einhorn": "Vision√§r und innovativ, entwickelt strategische Pl√§ne.",
    "Adler": "Strukturiert und zielgerichtet in der Planung.",
    "Ameise": "Plant methodisch, um Ziele zu erreichen.",
    "Biene": "Effizient und pragmatisch, trifft Entscheidungen im Sinne des Kollektivs.",
    "Cham√§leon": "Flexibel und taktisch, nutzt Gelegenheiten geschickt.",
    "Hund": "Emotional und loyal ‚Äì Entscheidungen basieren auf Vertrauen und Intuition.",
    "L√∂we": "Dominant und entschlossen ‚Äì trifft schnell Entscheidungen mit F√ºhrungsanspruch.",
    "Katze": "Analytisch und unabh√§ngig ‚Äì entscheidet eigenst√§ndig nach Abw√§gung.",
    "Hy√§ne": "Berechnend und kontrollierend ‚Äì verfolgt langfristige Strategien.",
    "Insekt_n√ºtzlich": "Kreativ und l√∂sungsorientiert ‚Äì denkt unkonventionell.",
    "Insekt_l√§stig": "Impulsiv und st√∂rend ‚Äì wenig strategische Tiefe.",
    "Schakal": "Spontan, eigenn√ºtzig ‚Äì Entscheidungen oft rebellisch motiviert.",
    "Maus": "Vorsichtig und bedacht ‚Äì w√§gt lange ab vor Entscheidungen.",
    "Parasit": "Vermeidet Entscheidungen ‚Äì passt sich lieber an Gegebenheiten an.",
    "Eule": "Weise und reflektierend ‚Äì trifft gut durchdachte, langfristige Entscheidungen.",
    "Piranha": "Impulsiv und aggressiv ‚Äì entscheidet unter Druck, oft kurzfristig.",
    "Eiche": "Stabil und vorausschauend ‚Äì trifft Entscheidungen mit Weitblick.",
    "Klapperschlange": "Taktisch und vorausschauend ‚Äì trifft stille, aber gezielte Entscheidungen.",
    "Faultier": "Langsam und z√∂gerlich ‚Äì trifft Entscheidungen sp√§t oder gar nicht.",
    "Dinosaurier": "Konservativ und starr ‚Äì plant aus Erfahrung, meidet Ver√§nderungen.",
    "Geier": "Wartet ab und beobachtet ‚Äì entscheidet, wenn es strategisch am g√ºnstigsten ist.",
    "Wal": "Intuitiv und tiefgr√ºndig ‚Äì trifft √ºberlegte, wertebasierte Entscheidungen.",
    "Hybrid": "Strategisch flexibel ‚Äì analysiert komplexe Zusammenh√§nge schnell.",
    "Yak": "Standhaft und praktisch ‚Äì trifft Entscheidungen, die auf Stabilit√§t setzen.",
    "Kind": "Spontan und kreativ ‚Äì entscheidet nach Bauchgef√ºhl, nicht Strategie."
  },
"Anpassungsf√§higkeit & Stressbew√§ltigung": {
    "Ameise": "Bleibt organisiert und zielgerichtet, auch unter Druck.",
    "Biene": "Reagiert strukturiert und gemeinschaftlich auf Stresssituationen.",
    "Cham√§leon": "Extrem anpassungsf√§hig ‚Äì meistert Stress durch Tarnung und Wandel.",
    "Hund": "Sucht emotionale Bindung zur Stressbew√§ltigung ‚Äì reagiert sensibel.",
    "Adler": "Beobachtet und entscheidet ruhig ‚Äì bleibt in Stresssituationen fokussiert.",
    "Katze": "Zieht sich zur√ºck und l√∂st Probleme unabh√§ngig.",
    "Gibbon": "Kommuniziert in Stresssituationen offen ‚Äì sucht Ausgleich durch Austausch.",
    "Hy√§ne": "Reagiert impulsiv, aber zielgerichtet ‚Äì k√§mpft sich durch.",
    "Insekt_n√ºtzlich": "Flexibel und kreativ ‚Äì l√∂st Stress pragmatisch.",
    "Insekt_l√§stig": "Verst√§rkt Stress im Umfeld ‚Äì unruhig und st√∂rend.",
    "Schakal": "Rebelliert in Stresssituationen ‚Äì neigt zu impulsivem Verhalten.",
    "L√∂we": "Bleibt dominant und kontrollierend ‚Äì l√§sst sich selten aus der Ruhe bringen.",
    "Maus": "Reagiert mit Vorsicht und R√ºckzug ‚Äì sensibel gegen√ºber Stress.",
    "Parasit": "Weicht Verantwortung aus ‚Äì entzieht sich stressigen Situationen.",
    "Eule": "Analysiert Situationen tiefgr√ºndig ‚Äì reagiert ruhig und weise.",
    "Piranha": "Aggressiv unter Druck ‚Äì reagiert schnell und instinktiv.",
    "Eiche": "Bleibt standhaft ‚Äì meistert Stress durch Ruhe und Stabilit√§t.",
    "Klapperschlange": "Verh√§lt sich defensiv ‚Äì kalkuliert ihre Reaktionen.",
    "Faultier": "Bleibt langsam und gelassen ‚Äì reagiert kaum auf √§usseren Druck.",
    "Dinosaurier": "Tut sich schwer mit Wandel ‚Äì reagiert oft starr auf Stress.",
    "Einhorn": "Sucht kreative Wege zur Bew√§ltigung ‚Äì kann unter Druck aber √ºberfordert sein.",
    "Geier": "Passt sich langsam an ‚Äì wartet Stress eher aus.",
    "Wal": "Nutzt emotionale Tiefe zur Verarbeitung ‚Äì bleibt gelassen.",
    "Hybrid": "Reagiert intelligent und schnell ‚Äì bleibt flexibel in jeder Situation.",
    "Yak": "Ruhig und belastbar ‚Äì tr√§gt Stress √ºber lange Zeit ohne zu klagen.",
    "Kind": "Reagiert spontan ‚Äì kann Stress nicht langfristig verarbeiten, aber bleibt neugierig."
 },
  "Selbstreflexion, Werte & Pers√∂nliche Entwicklung": {
     "Ameise": "Reflektiert strukturiert und arbeitet kontinuierlich an sich.",
    "Biene": "Offen f√ºr Feedback und strebt nach st√§ndiger Verbesserung.",
    "Katze": "Zeigt Selbstkritik und agiert unabh√§ngig.",
    "Gibbon": "Bringt kreative und kommunikative Impulse in die Selbstreflexion.",
    "Eule": "Wirkt weise und analytisch ‚Äì ideal f√ºr tiefe Reflexion.",
    "Adler": "Reflektiert zielorientiert, entwickelt sich durch Herausforderungen.",
    "Cham√§leon": "Reflektiert situativ ‚Äì Entwicklung oft taktisch motiviert.",
    "Hund": "Entwickelt sich durch Beziehungen und emotionale Erfahrungen.",
    "L√∂we": "Selbstbewusst und stolz ‚Äì pers√∂nliche Entwicklung ist machtorientiert.",
    "Hy√§ne": "Stark getrieben von Ehrgeiz ‚Äì reflektiert strategisch.",
    "Insekt_n√ºtzlich": "Selbstwirksam und lernbereit ‚Äì w√§chst durch n√ºtzliche Aufgaben.",
    "Insekt_l√§stig": "Geringe Selbstreflexion ‚Äì eher selbstzentriert.",
    "Schakal": "Rebellisch, aber mit innerem Antrieb zur Ver√§nderung.",
    "Maus": "Still und vorsichtig ‚Äì reflektiert tief, aber zur√ºckhaltend.",
    "Parasit": "Wenig selbstkritisch ‚Äì Entwicklung meist aus Notwendigkeit.",
    "Piranha": "Selbstkritik kaum vorhanden ‚Äì wenig Interesse an innerer Entwicklung.",
    "Eiche": "Stabil und wertebasiert ‚Äì pers√∂nliche Entwicklung ist stetig und ruhig.",
    "Klapperschlange": "Strategisch reflektiert ‚Äì Entwicklung erfolgt berechnend.",
    "Faultier": "Ruhig und geduldig ‚Äì reflektiert mit innerer Gelassenheit.",
    "Dinosaurier": "Reflexion in traditionellen Bahnen ‚Äì Entwicklung verl√§uft langsam.",
    "Einhorn": "Stark idealistisch ‚Äì reflektiert auf Sinn und Werte bezogen.",
    "Geier": "Beobachtend ‚Äì reflektiert eher √ºber andere als √ºber sich selbst.",
    "Wal": "Emotional tief ‚Äì reflektiert √ºber das grosse Ganze.",
    "Hybrid": "Introspektiv und analytisch ‚Äì kombiniert Rationalit√§t mit Selbstentwicklung.",
    "Yak": "Bodenst√§ndig und ruhig ‚Äì reflektiert durch Erfahrung.",
    "Kind": "Offen, neugierig ‚Äì entwickelt sich spielerisch durch neue Eindr√ºcke."
 } // üëà Ende des letzten Kategorien-Blocks
};

// ‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì
// 1) Mapping: Bei welchen Fragen taucht jedes Top‚Äë5‚ÄëTier auf?
// ‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì
const tierZuKategorie = {};
questions.forEach((q, i) => {
  Object.values(q.answers).forEach(ans => {
    const tier = codeToTier[ans.code];
    if (tier && top5.some(([name]) => name === tier)) {
      (tierZuKategorie[tier] ||= []).push(i);
    }
  });
});

const headingWrapper = document.createElement("div");
headingWrapper.style.maxWidth = "800px";
headingWrapper.style.margin = "40px auto 30px";
headingWrapper.style.padding = "0 16px";
headingWrapper.style.display = "flex";
headingWrapper.style.flexDirection = "column";
headingWrapper.style.gap = "12px";

// 1. Haupttitel: Instinkte, Intuition & Einfluss
const subtitle = document.createElement("h2");
subtitle.textContent = "Instinkte, Intuition & Einfluss";
subtitle.style.fontSize = "1.6em";
subtitle.style.fontWeight = "700";
subtitle.style.margin = "0";
subtitle.style.color = "inherit"; // Standardfarbe (dunkel im Light Mode, hell im Dark Mode)
subtitle.style.textAlign = "left";
headingWrapper.appendChild(subtitle);

// 2. Erkl√§rungstext
const erklaerung = document.createElement("p");
erklaerung.textContent = "Diese √úbersicht zeigt, wie deine charakterlichen Tendenzen sich in verschiedenen Situationen ausdr√ºcken ‚Äì ganz ohne Schubladendenken, aber mit einem Augenzwinkern.";
erklaerung.style.fontSize = "0.95em";
erklaerung.style.lineHeight = "1.6";
erklaerung.style.margin = "0";
erklaerung.style.textAlign = "left";
erklaerung.style.color = "inherit";
headingWrapper.appendChild(erklaerung);

// 3. Zweite Hauptzeile: ‚ÄûDeine Verhaltenskarte‚Äú
const verhaltensTitel = document.createElement("h2");
verhaltensTitel.textContent = "‚ÄûDeine Verhaltenskarte‚Äú";
verhaltensTitel.style.fontSize = "1.6em";
verhaltensTitel.style.fontWeight = "700";
verhaltensTitel.style.margin = "24px 0 0";
verhaltensTitel.style.color = "inherit";
verhaltensTitel.style.textAlign = "left";
headingWrapper.appendChild(verhaltensTitel);

// In Ergebnis einf√ºgen
ergebnisElem.appendChild(headingWrapper);

Object.keys(kategorienMapping).forEach(kat => {
  const relevanteFragen = kategorienMapping[kat];
  const counts = {};
  Object.entries(tierZuKategorie).forEach(([tier, fragen]) => {
    const c = fragen.filter(i => relevanteFragen.includes(i)).length;
    if (c > 0) counts[tier] = c;
  });

  const topTier = Object.entries(counts).sort((a, b) => b[1] - a[1])[0]?.[0] || top5[0][0];
  const beschreibung = categoryDescriptions[kat]?.[topTier] || 'Hier erf√§hrst du mehr √ºber dieses Tier.';
  const fileName = makeFileName(topTier);

  // Gesamtcontainer
  const section = document.createElement('div');
  section.style.cssText = `
    display: flex;
    align-items: flex-start;
    gap: 20px;
    padding: 20px;
   background-color: #ffffff;
color: #000000;
    border-radius: 16px;
    box-shadow: 0 2px 8px rgba(0,0,0,0.08);
    margin: 20px 0;
    transition: background 0.3s, color 0.3s;
    flex-wrap: wrap;
  `;

  // Bild links
  const imageDiv = document.createElement('div');
  imageDiv.style.cssText = `
    flex: 0 0 auto;
    width: 60px;
    height: 60px;
  `;
  imageDiv.innerHTML = `<img src="${fileName}.png" alt="${topTier}" style="width:100%; height:auto;">`;
  section.appendChild(imageDiv);

  // Textblock rechts (mittig stacked)
  const textWrapper = document.createElement('div');
  textWrapper.style.cssText = `
    flex: 1 1 300px;
    display: flex;
    flex-direction: column;
    justify-content: flex-start;
  `;

  const titleEl = document.createElement('div');
  titleEl.style.cssText = `
    font-size: 1.1em;
    font-weight: bold;
    margin-bottom: 6px;
  `;
  titleEl.textContent = kat;

  const descEl = document.createElement('div');
  descEl.style.cssText = `
    font-size: 0.95em;
    line-height: 1.5;
    color: inherit;
  `;
  descEl.innerHTML = beschreibung;

  textWrapper.appendChild(titleEl);
  textWrapper.appendChild(descEl);
  section.appendChild(textWrapper);

  ergebnisElem.appendChild(section);
});

// Seitenumbruch nach allen Verhaltenskategorien
const breakNachKarte = document.createElement("div");
breakNachKarte.className = "page-break";
ergebnisElem.appendChild(breakNachKarte);

// ---------------------------
// Berechne die Prozentwerte f√ºr jedes Attribut
// ---------------------------
const attributePercentages = {};
for (let attr in attributeData) {
  const sum   = attributeData[attr].sum;
  const count = attributeData[attr].count;
  // 4 = Maximalwertung pro Frage
  attributePercentages[attr] = Math.round((sum / (count * 4)) * 100);
}

// Optional: zum Debuggen
console.log("attributePercentages:", attributePercentages);

// ---------------------------
// Netzdiagramm anzeigen
// ---------------------------

// Werte vorbereiten
const attributeLabels = Object.keys(attributePercentages);
const attributeValues = Object.values(attributePercentages);

// ---------------------------
// Titel & Beschreibung f√ºr Selbstreflexion
// ---------------------------
const reflexionWrapper = document.createElement("div");
reflexionWrapper.style.maxWidth = "800px";
reflexionWrapper.style.margin = "60px auto 30px";
reflexionWrapper.style.textAlign = "center";

const reflexionTitle = document.createElement("h2");
reflexionTitle.textContent = "Dein pers√∂nliches Profil auf einen Blick";
reflexionTitle.style.fontSize = "1.8em";
reflexionTitle.style.marginBottom = "12px";

const reflexionText = document.createElement("p");
reflexionText.textContent =
  "Dieses Diagramm zeigt, wie ausgepr√§gt bestimmte Eigenschaften bei dir im Gesamtbild erscheinen ‚Äì basierend auf deinen Antworten. Es ist eine Momentaufnahme deiner Reflexion √ºber dich selbst.";
reflexionText.style.fontSize = "0.95em";
reflexionText.classList.add("reflexion-text");
reflexionText.style.lineHeight = "1.6";

reflexionWrapper.appendChild(reflexionTitle);
reflexionWrapper.appendChild(reflexionText);
ergebnisElem.appendChild(reflexionWrapper);

// Canvas in zentriertem Container einf√ºgen
const canvasWrapper = document.createElement("div");
canvasWrapper.style.display = "flex";
canvasWrapper.style.justifyContent = "center";
canvasWrapper.style.alignItems = "center";
canvasWrapper.style.marginBottom = "40px";

const canvas = document.createElement("canvas");
const size = 400;
const scale = 2;
canvas.width = size * scale;
canvas.height = size * scale;
canvas.style.width = size + "px";
canvas.style.height = size + "px";

canvasWrapper.appendChild(canvas);
ergebnisElem.appendChild(canvasWrapper);

// Context holen und skalieren
const ctx = canvas.getContext("2d");
ctx.scale(scale, scale);

// Dynamisches Maximum
const maxEigenschaftswert = Math.max(...attributeValues);
const dynamicMax = Math.ceil(maxEigenschaftswert * 1.2);

// Dark Mode Farben setzen
const darkMode = window.matchMedia("(prefers-color-scheme: dark)").matches;
const pointLabelColor = darkMode ? "#ffffff" : "#000000";
const gridColor = darkMode ? "#555555" : "#eee";

// Nur wenn Werte vorhanden sind
if (attributeLabels.length > 0) {
  new Chart(ctx, {
    type: 'radar',
    data: {
      labels: attributeLabels,
      datasets: [{
        label: "Dein Profil",
        data: attributeValues,
        backgroundColor: "rgba(228, 74, 0, 0.3)",
        borderColor: "#E44A00",
        pointBackgroundColor: "#E44A00",
        borderWidth: 2
      }]
    },
    options: {
      responsive: false,
      scales: {
        r: {
          suggestedMin: 0,
          suggestedMax: dynamicMax,
          ticks: {
            stepSize: 20,
            backdropColor: "transparent",
            font: { size: 12 }
          },
          pointLabels: {
            font: { size: 28 },
            color: pointLabelColor
          },
          grid: { color: gridColor },
          angleLines: { color: "#ccc" }
        }
      },
      plugins: {
        legend: { display: false }
   }
        }
      });
    } // Ende der if‚ÄëAbfrage

formElem.addEventListener("submit", function(e) {
  e.preventDefault();

  // ‚Ä¶ ALLES, was die Ergebnisse aufbaut und #auswertung-start injiziert ‚Ä¶

  // Ergebnis und Print-Button zeigen
  ergebnisElem.style.display = "block";
  printButton.style.display = "block";

  setTimeout(() => {
  const ziel = document.getElementById("auswertung-start");
  if (ziel) {
    ziel.scrollIntoView({ behavior: "smooth", block: "start" });
  }
}, 0); // oder 50‚Äì100ms

}); // 
  }); // ‚Üê schliesst formElem.addEventListener("submit", ‚Ä¶)

  // üß† E-Mail pr√ºfen, Button nur aktivieren bei g√ºltiger Adresse
  const emailInput   = document.getElementById("email");
  const auswertenBtn = document.getElementById("auswertenBtn");
  emailInput.addEventListener("input", () => {
    const emailWert  = emailInput.value.trim();
    const istGueltig = /^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(emailWert);
    auswertenBtn.disabled = !istGueltig;
  });

  // üñ® Druck-Button: L√∂st window.print() aus
  printButton.addEventListener("click", () => window.print());

}); // ‚Üê schliesst document.addEventListener("DOMContentLoaded", ‚Ä¶)
</script>

  <!-- Footer nur beim Drucken sichtbar ‚Äì direkt vor </body> -->
  <div class="print-footer">
    ¬© 2025 <span style="color: #E44A00;">OrganisationsZoo</span> Nicole St√∂cker, Peter Renner und Simon Bertogg - Alle Rechte vorbehalten.
  </div>
</body>
</html>
